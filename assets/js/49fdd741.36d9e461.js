"use strict";(self.webpackChunkappcircle_docusaurus=self.webpackChunkappcircle_docusaurus||[]).push([[38226],{7939:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>c,default:()=>p,frontMatter:()=>l,metadata:()=>s,toc:()=>h});const s=JSON.parse('{"id":"versioning/android-version","title":"Understanding Android Versioning","description":"Learn how to manage version code and version name in Android projects with Appcircle","source":"@site/docs/versioning/android-version.md","sourceDirName":"versioning","slug":"/versioning/android-version","permalink":"/versioning/android-version","draft":false,"unlisted":false,"editUrl":"https://github.com/appcircleio/appcircle-docusaurus/tree/master/docs/versioning/android-version.md","tags":[{"inline":false,"label":"android","permalink":"/tags/android","description":"Description for android"},{"inline":false,"label":"versioning","permalink":"/tags/versioning","description":"Description for versioning"},{"inline":false,"label":"version code","permalink":"/tags/version-code","description":"Description for version code"},{"inline":false,"label":"version name","permalink":"/tags/version-name","description":"Description for version name"}],"version":"current","sidebarPosition":1,"frontMatter":{"title":"Understanding Android Versioning","description":"Learn how to manage version code and version name in Android projects with Appcircle","tags":["android","versioning","version code","version name"],"sidebar_position":1},"sidebar":"mySidebar","previous":{"title":"Versioning","permalink":"/versioning/"},"next":{"title":"Understanding iOS Versioning","permalink":"/versioning/ios-version"}}');var r=i(74848),t=i(28453),o=(i(70344),i(83315)),a=i(69678);const l={title:"Understanding Android Versioning",description:"Learn how to manage version code and version name in Android projects with Appcircle",tags:["android","versioning","version code","version name"],sidebar_position:1},c=void 0,d={},h=[{value:"Enabling Version Management",id:"enabling-version-management",level:2},{value:"Managing Version Code",id:"managing-version-code",level:3},{value:"Managing Version Name",id:"managing-version-name",level:3},{value:"Advanced Settings",id:"advanced-settings",level:3},{value:"Output Variables",id:"output-variables",level:3},{value:"Input Variables",id:"input-variables",level:3},{value:"Versioning Playground",id:"versioning-playground",level:3}];function u(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components},{ExternalUrlRef:i}=n;return i||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("ExternalUrlRef",!0),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h2,{id:"enabling-version-management",children:"Enabling Version Management"}),"\n",(0,r.jsx)(n.p,{children:"In order to manage version code and version name with Appcircle, two requirements must be met:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"The build's Version Management toggle must be turned on and required input values must be entered."}),"\n"]}),"\n",(0,r.jsx)(a.A,{url:"https://cdn.appcircle.io/docs/assets/versioning-android-configuration.png"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Increment Build and Version Number"})," component ",(0,r.jsx)(n.code,{children:"1.0.*"})," or higher must be in your workflow."]}),"\n"]}),"\n",(0,r.jsx)(a.A,{url:"https://cdn.appcircle.io/docs/assets/versioning-android-workflow.png"}),"\n",(0,r.jsx)(n.p,{children:"The Versioning tab manages the input values of the component. It is not recommended to change the values of the component with the workflow editor. Instead, it would be best if you always used the Versioning UI to manage the settings."}),"\n",(0,r.jsx)(n.admonition,{type:"caution",children:(0,r.jsx)(n.p,{children:"Gradle files are written in Groovy language. Therefore it can use functions or environment variables during the build. This component doesn't cover all the edge cases. Please test your workflow thoroughly and make sure that it works as intended."})}),"\n",(0,r.jsx)(n.h3,{id:"managing-version-code",children:"Managing Version Code"}),"\n",(0,r.jsx)(n.p,{children:"The versioning system needs a version code source and an offset to calculate the new version code. There are two source types for the version code."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Version Code Source"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Environment Variable"}),"\n",(0,r.jsx)(n.li,{children:"Gradle"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["If you select ",(0,r.jsx)(n.strong,{children:"Environment Variable"}),", you need to write the source environment variable into ",(0,r.jsx)(n.code,{children:"Version Code"}),". The default value for this input is ",(0,r.jsx)(n.code,{children:"$AC_BUILD_NUMBER"}),". This variable increases after every build. You can also use other environment variables that you create or select from the config screen. Environment variables must start with the ",(0,r.jsx)(n.code,{children:"$"})," sign."]}),"\n",(0,r.jsxs)(n.p,{children:["If you select Gradle, the version code will be read from build.gradle file. If you want to use different flavor, please set them in the ",(0,r.jsx)(n.strong,{children:"Advanced Settings"})," section."]}),"\n",(0,r.jsxs)(n.admonition,{type:"danger",children:[(0,r.jsxs)(n.p,{children:["Using a dynamic ",(0,r.jsx)(n.code,{children:"versionCode"})," in the Gradle file is not supported for version incrementing. If you define ",(0,r.jsx)(n.code,{children:"versionCode"})," dynamically, you may encounter a format error after selecting Gradle as the ",(0,r.jsx)(n.code,{children:"Version Code Source"}),"."]}),(0,r.jsx)(n.p,{children:"For a sample of a stable format, you can refer to the document below:"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://developer.android.com/studio/publish/versioning#appversioning",children:"Android - Set app version information"})}),"\n"]})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Offset"})}),"\n",(0,r.jsxs)(n.p,{children:["If you select ",(0,r.jsx)(n.code,{children:"$AC_BUILD_NUMBER"})," as your version code source, the version code in your project can be different. To synchronize version code, you can use the offset. The offset value is a number to be added or subtracted from the ",(0,r.jsx)(n.em,{children:"Version Code Source"}),". Negative values can be written such as -10."]}),"\n",(0,r.jsx)(n.h3,{id:"managing-version-name",children:"Managing Version Name"}),"\n",(0,r.jsx)(n.p,{children:"The versioning system needs a version name source and an offset to calculate the new version name. There are two source types for the version name."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Version Name Source"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Environment Variable"}),"\n",(0,r.jsx)(n.li,{children:"Gradle"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["If you select Environment Variable, you need to write the source environment variable into ",(0,r.jsx)(n.code,{children:"Version Name"})," You can use any environment variable that you create or select from the config screen. Environment variables must start with the ",(0,r.jsx)(n.code,{children:"$"})," sign."]}),"\n",(0,r.jsx)(n.p,{children:"If you select Gradle, the version name will be read from the given Android project."}),"\n",(0,r.jsxs)(n.admonition,{type:"danger",children:[(0,r.jsxs)(n.p,{children:["Using a dynamic ",(0,r.jsx)(n.code,{children:"versionName"})," in the Gradle file is not supported for version incrementing. If you define ",(0,r.jsx)(n.code,{children:"versionName"})," dynamically, you may encounter a format error after selecting Gradle as the ",(0,r.jsx)(n.code,{children:"Version Name Source"}),"."]}),(0,r.jsx)(n.p,{children:"For a sample of a stable format, you can refer to the document below:"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://developer.android.com/studio/publish/versioning#appversioning",children:"Android - Set app version information"})}),"\n"]})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Offset"})}),"\n",(0,r.jsxs)(n.p,{children:["To synchronize version names, you can use the offset. The offset value is a number to be added or subtracted from the ",(0,r.jsx)(n.em,{children:"Version Name Source"}),". Negative values can be written such as -10."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Increment"})}),"\n",(0,r.jsx)(n.p,{children:"You can increase the major, minor, or patch value of the version name. For version name 2.5.1, values can be summarized below."}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Part"}),(0,r.jsx)(n.th,{children:"Value"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Major"}),(0,r.jsx)(n.td,{children:"2"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Minor"}),(0,r.jsx)(n.td,{children:"5"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Patch"}),(0,r.jsx)(n.td,{children:"1"})]})]})]}),"\n",(0,r.jsx)(n.admonition,{type:"warning",children:(0,r.jsxs)(n.p,{children:["To increment the version name, please make sure it is in an integer format (",(0,r.jsx)(n.code,{children:"INT.INT.INT"}),"). Incrementing non-integer version names is not supported."]})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Omit Zero Patch Version"})}),"\n",(0,r.jsxs)(n.p,{children:["If true, omits zero in the patch version. So ",(0,r.jsx)(n.em,{children:"42.10.0"})," will become ",(0,r.jsx)(n.em,{children:"42.10"})," and ",(0,r.jsx)(n.em,{children:"42.10.1"})," will remain ",(0,r.jsx)(n.em,{children:"42.10.1"}),". The default is false."]}),"\n",(0,r.jsx)(n.h3,{id:"advanced-settings",children:"Advanced Settings"}),"\n",(0,r.jsx)(n.p,{children:"This component works on standard build.gradle files. If you use flavors in your build.gradle, you can set the flavor name. However, please be aware that flavor support is not foolproof. Due to dynamic nature of build.gradle file, it may not cover all the cases."}),"\n",(0,r.jsx)(n.h3,{id:"output-variables",children:"Output Variables"}),"\n",(0,r.jsx)(n.p,{children:"After the version code or version name update, new values will be written to two environment variables."}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Variable Name"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"$AC_ANDROID_NEW_VERSION_CODE"})}),(0,r.jsx)(n.td,{children:"Represents the incremented version code applied to the project."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"$AC_ANDROID_NEW_VERSION_NAME"})}),(0,r.jsx)(n.td,{children:"Represents the incremented version name applied to the project."})]})]})]}),"\n",(0,r.jsx)(n.p,{children:"You can use the above values in the remaining steps of your workflow."}),"\n",(0,r.jsx)(n.h3,{id:"input-variables",children:"Input Variables"}),"\n",(0,r.jsx)(n.p,{children:"The versioning system works by consuming environment variables. Even though it's easier to configure it by using UI, sometimes you may want to change them on the fly. Your commit messages or tags can be used to override those settings. The name of the variables and expected values can be found below."}),"\n",(0,r.jsx)(a.A,{url:"https://cdn.appcircle.io/docs/assets/android-workflow-components-increment-build-and-version-number_2.png"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Variable Name"}),(0,r.jsx)(n.th,{children:"Description"}),(0,r.jsx)(n.th,{children:"Status"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"$AC_REPOSITORY_DIR"})}),(0,r.jsxs)(n.td,{children:["This variable represents the path of the cloned Git repository. If it runs after the ",(0,r.jsx)(n.a,{href:"/workflows/common-workflow-steps/git-clone",children:"Git Clone"})," step, the variable will be automatically populated."]}),(0,r.jsx)(n.td,{children:"Required"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"$AC_BUILD_NUMBER_SOURCE"})}),(0,r.jsx)(n.td,{children:"Version code source type (environment variable or gradle file)."}),(0,r.jsx)(n.td,{children:"Required"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"$AC_ANDROID_BUILD_NUMBER"})}),(0,r.jsxs)(n.td,{children:["Version code to set. If ",(0,r.jsx)(n.code,{children:"$AC_BUILD_NUMBER_SOURCE"})," is set to gradle, this variable will be read from the project."]}),(0,r.jsx)(n.td,{children:"Optional"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"$AC_BUILD_OFFSET"})}),(0,r.jsxs)(n.td,{children:["The number to be added or subtracted from the ",(0,r.jsx)(n.code,{children:"$AC_ANDROID_BUILD_NUMBER"}),"."]}),(0,r.jsx)(n.td,{children:"Optional"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"$AC_VERSION_NUMBER_SOURCE"})}),(0,r.jsx)(n.td,{children:"Version name source type (environment variable or gradle file)."}),(0,r.jsx)(n.td,{children:"Optional"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"$AC_ANDROID_VERSION_NUMBER"})}),(0,r.jsxs)(n.td,{children:["Version name to set. If ",(0,r.jsx)(n.code,{children:"$AC_VERSION_NUMBER_SOURCE"})," is set to gradle, this variable will be read from the project. Version name must be in integer format (",(0,r.jsx)(n.code,{children:"INT.INT.INT"}),") to increase."]}),(0,r.jsx)(n.td,{children:"Optional"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"$AC_VERSION_STRATEGY"})}),(0,r.jsxs)(n.td,{children:["Version increment strategy (",(0,r.jsx)(n.code,{children:"major"}),", ",(0,r.jsx)(n.code,{children:"minor"}),", ",(0,r.jsx)(n.code,{children:"patch"}),", or ",(0,r.jsx)(n.code,{children:"keep"}),")."]}),(0,r.jsx)(n.td,{children:"Optional"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"$AC_VERSION_OFFSET"})}),(0,r.jsxs)(n.td,{children:["The number to be added or subtracted from the ",(0,r.jsx)(n.code,{children:"$AC_ANDROID_VERSION_NUMBER"}),"."]}),(0,r.jsx)(n.td,{children:"Optional"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"$AC_PROJECT_PATH"})}),(0,r.jsxs)(n.td,{children:["Specifies the project path. If the project that needs to be built is ",(0,r.jsx)(n.strong,{children:"not located"})," in the root directory where it was cloned from Git, you should provide the subpath as a relative path."]}),(0,r.jsx)(n.td,{children:"Optional"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"$AC_VERSION_FLAVOR"})}),(0,r.jsxs)(n.td,{children:["Build flavor. If you select a flavor from the ",(0,r.jsx)(n.a,{href:"#advanced-settings",children:(0,r.jsx)(n.strong,{children:"Advanced Settings"})})," section, the versioning of the chosen flavor will be applied (for example, the Gradle file of the selected flavor will be used)."]}),(0,r.jsx)(n.td,{children:"Optional"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"$AC_OMIT_ZERO_PATCH_VERSION"})}),(0,r.jsxs)(n.td,{children:["If ",(0,r.jsx)(n.code,{children:"true"}),", it omits zero in the patch version."]}),(0,r.jsx)(n.td,{children:"Optional"})]})]})]}),"\n",(0,r.jsx)(n.p,{children:"Since you can use any environment variables for the version code and version name, you can consume Appcircle's various environment variables during the build. Appcircle gives plenty of information related to your repo and project."}),"\n",(0,r.jsx)(n.p,{children:"Let's see a couple of ways to utilize those values."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Using Commit Messages"})}),"\n",(0,r.jsxs)(n.p,{children:["We can extract the commit message and set the version name from the message. Commit message is stored inside ",(0,r.jsx)(n.code,{children:"$AC_COMMIT_MESSAGE"}),". Let's say we want to use the version name from the commit message. Let's assume that the commit message is ",(0,r.jsx)(n.code,{children:"[VERSION] 1.2.3"})," Since we will use a calculated value, we have to change our ",(0,r.jsx)(n.code,{children:"$AC_VERSION_NUMBER_SOURCE"})," as well. We also set the offset value as 0 so that the calculated value can be applied directly. We can use the following custom script to extract this information."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ruby",children:"commit_message = ENV['AC_COMMIT_MESSAGE']\n# extract commit message with regex\nversion = commit_message.match(/\\[VERSION\\] (.*)/)\nif version\n  version = version[1]\n  open(ENV['AC_ENV_FILE_PATH'], 'a') { |f|\n    f.puts \"AC_VERSION_NUMBER_SOURCE=env\"\n    f.puts \"AC_VERSION_OFFSET=0\"\n    f.puts \"AC_ANDROID_VERSION_NUMBER=#{version}\"\n}\nend\n"})}),"\n",(0,r.jsx)(n.p,{children:"Just add this script as a custom script above the Increment Android Version Component. The type of the script must be set as ruby."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Using Tags"})}),"\n",(0,r.jsxs)(n.p,{children:["It is also possible to extract the version name from the Git tags. The following example assumes that the commit has a single tag. If you tag your version with ",(0,r.jsx)(n.code,{children:"release-1.2.3"}),", the following script will extract the version name from the tag."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ruby",children:"commit_message = ENV['AC_COMMIT_TAGS']\nversion = commit_message.match(/release-(.*)/)\nif version\n  version = version[1]\n  open(ENV['AC_ENV_FILE_PATH'], 'a') { |f|\n    f.puts \"AC_VERSION_NUMBER_SOURCE=env\"\n    f.puts \"AC_VERSION_OFFSET=0\"\n    f.puts \"AC_ANDROID_VERSION_NUMBER=#{version}\"\n}\nend\n"})}),"\n",(0,r.jsx)(n.h3,{id:"versioning-playground",children:"Versioning Playground"}),"\n",(0,r.jsx)(n.p,{children:"You can use the below playground to test the effect of different options"}),"\n",(0,r.jsx)(o.A,{title:"Version Code",subtitle:"Version Name"}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.p,{children:"To access the source code of this component, please use the following link:"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.a,{href:"https://github.com/appcircleio/appcircle-android-build-version-increment-component.git",children:(0,r.jsx)(i,{url:"https://github.com/appcircleio/appcircle-android-build-version-increment-component.git",title:"GitHub - appcircleio/appcircle-android-build-version-increment-component",description:"Contribute to appcircleio/appcircle-android-build-version-increment-component development by creating an account on GitHub.",image:"https://opengraph.githubassets.com/fa635336641bc37c368ef069ee2bb5a4bc6feca04f53bdb0230e13c171463b89/appcircleio/appcircle-android-build-version-increment-component"})})})]})}function p(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(u,{...e})}):u(e)}},70344:(e,n,i)=>{i.d(n,{A:()=>c});var s,r,t=i(96540);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var s in i)({}).hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},o.apply(null,arguments)}const a=e=>{let{title:n,titleId:i,...a}=e;return t.createElement("svg",o({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,className:"feather feather-file-text",viewBox:"0 0 24 24","aria-labelledby":i},a),n?t.createElement("title",{id:i},n):null,s||(s=t.createElement("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"})),r||(r=t.createElement("path",{d:"M14 2v6h6M16 13H8M16 17H8M10 9H8"})))};var l=i(74848);function c(e){let{children:n,url:i}=e;return(0,l.jsxs)("a",{href:i,className:"content-ref-card",children:[(0,l.jsx)(a,{title:"File Icon",className:"file-icon"}),n]})}},69678:(e,n,i)=>{i.d(n,{A:()=>r});i(96540);var s=i(74848);function r(e){let{url:n,alt:i}=e;return(0,s.jsx)("img",{className:"screenshot",src:n,alt:i||"Screenshot"})}},83315:(e,n,i)=>{i.d(n,{A:()=>h});var s=i(96540),r=i(74848);const t=function(e){const{checked:n,disabled:i,onChange:s,offstyle:t="btn-warning",onstyle:o="btn-success"}=e;let a=n?o:t;return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("label",{style:{userSelect:"none"},children:(0,r.jsxs)("span",{className:"switch-wrapper",children:[(0,r.jsx)("input",{type:"checkbox",checked:n,disabled:i,onChange:e=>s&&s(e)}),(0,r.jsx)("span",{className:"switch",style:{background:a},children:(0,r.jsx)("span",{className:"switch-handle"})})]})})})},o=e=>(0,r.jsxs)("div",{className:"ToggleCircle",children:[(0,r.jsxs)("div",{className:"ToggleCircle_Label",children:[(0,r.jsx)("h1",{children:e.toggleTitle}),(0,r.jsx)("span",{children:e.toggleDesc})]}),(0,r.jsx)(t,{...e})]}),a=e=>(0,r.jsx)("input",{className:"TextInput",value:e.value,onChange:n=>e.onChange(n)}),l=e=>(0,r.jsxs)("div",{className:"TextInputCircle",children:[(0,r.jsx)("div",{className:"TextInputCircle_Label",children:(0,r.jsx)("label",{children:e.title})}),(0,r.jsx)(a,{...e}),e.bottomText&&e.bottomTitle&&(0,r.jsx)("p",{className:"TextInputCircle_bottomText",children:e.bottomTitle})]}),c=e=>(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("select",{className:"Select",value:e.value,onChange:n=>e.onChange(n.target.value),children:e.options.map((e=>(0,r.jsx)("option",{className:"Option",style:{color:"#445b77",fontSize:15},value:e.value,children:e.label},e.label)))})}),d=e=>(0,r.jsxs)("div",{className:"TextInputCircle",children:[(0,r.jsx)("div",{className:"TextInputCircle_Label",children:(0,r.jsx)("label",{children:e.title})}),(0,r.jsx)(c,{...e})]});function h(e){const[n,i]=(0,s.useState)("5"),[t,a]=(0,s.useState)("1.2.3"),[c,h]=(0,s.useState)("1"),[u,p]=(0,s.useState)("0"),[m,x]=(0,s.useState)("5"),[j,v]=(0,s.useState)("1.2.3"),[g,f]=(0,s.useState)(!1),[b,y]=(0,s.useState)("keep"),[w,N]=(0,s.useState)(!1),[_,I]=(0,s.useState)(!1),{title:C,subtitle:E}=e;return(0,s.useEffect)((()=>{(()=>{const e=(parseInt(c)||0)+(parseInt(n)||0);x(e)})()}),[n,c]),(0,s.useEffect)((()=>{(()=>{const e=t.split(".").map(Number),n=parseInt(u)||0;switch(b){case"patch":e[2]=(e[2]||0)+n;break;case"minor":e[1]=(e[1]||0)+n,e[2]=e[2]=0;break;case"major":e[0]=(e[0]||0)+n,e[1]=e[1]=0,e[1]=e[2]=0}g&&0==e[2]&&e.pop(),v(e.join("."))})()}),[t,u,b,g]),(0,r.jsxs)("div",{children:[(0,r.jsx)(l,{title:C,bottomText:!1,value:n,name:"buildNumber",onChange:e=>{i(e.target.value)}}),(0,r.jsx)(l,{title:E,bottomText:!1,value:t,name:"versionNumber",onChange:e=>{a(e.target.value)}}),(0,r.jsx)(o,{toggleTitle:`UPDATE ${C.toUpperCase()} WHILE BUILDING`,toggleDesc:`Appcircle will apply the ${C.toLowerCase()} while building based on your settings below.`,checked:w,disabled:!1,onChange:e=>{N(e.target.checked)}}),w&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l,{title:C+" Offset",bottomText:!1,value:c,onChange:e=>h(e.target.value)}),(0,r.jsx)("div",{className:"Calculated",children:(0,r.jsxs)("label",{children:["Calculated ",C,": ",(0,r.jsx)("span",{children:m})]})})]}),(0,r.jsx)(o,{toggleTitle:`UPDATE ${E.toUpperCase()} WHILE BUILDING`,toggleDesc:`Appcircle will apply the ${E.toLowerCase()} while building based on your settings below.`,checked:_,disabled:!1,onChange:e=>{I(e.target.checked)}}),_&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l,{title:E+" Offset",bottomText:!1,value:u,onChange:e=>p(e.target.value)}),(0,r.jsx)(d,{title:"Version Strategy",options:[{label:"Keep",value:"keep"},{label:"Major",value:"major"},{label:"Minor",value:"minor"},{label:"Patch",value:"patch"}],value:b,onChange:y}),(0,r.jsx)(o,{toggleTitle:"Omit Zero Patch Version",toggleDesc:"If true omits zero in patch version(so 42.10.0 will become 42.10 and 42.10.1 will remain 42.10.1), default is false",checked:g,disabled:!1,onChange:e=>f(e.target.checked),offstyle:"#a5b5c9",onstyle:"var(--ifm-color-primary)"}),(0,r.jsx)("div",{className:"Calculated",children:(0,r.jsxs)("label",{children:["Calculated ",E,": ",(0,r.jsx)("span",{children:j})]})})]})]})}},28453:(e,n,i)=>{i.d(n,{R:()=>o,x:()=>a});var s=i(96540);const r={},t=s.createContext(r);function o(e){const n=s.useContext(t);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);