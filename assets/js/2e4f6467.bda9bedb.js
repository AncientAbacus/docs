"use strict";(self.webpackChunkappcircle_docusaurus=self.webpackChunkappcircle_docusaurus||[]).push([[57017],{93978:(e,t,n)=>{n.d(t,{Ay:()=>l,RM:()=>s});var i=n(74848),r=n(28453);const s=[{value:"Need help?",id:"need-help",level:3}];function c(e){const t={a:"a",h3:"h3",...(0,r.R)(),...e.components},{ExternalUrlRef:n}=t;return n||function(e,t){throw new Error("Expected "+(t?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("ExternalUrlRef",!0),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.h3,{id:"need-help",children:"Need help?"}),"\n",(0,i.jsx)("p",{class:"need-help",children:"Get help from Appcircle's support team, or see how others are using Appcircle by joining our Slack Channel."}),"\n",(0,i.jsx)("p",{class:"need-help",children:(0,i.jsx)(t.a,{href:"https://join.slack.com/t/appcircleio/signup",children:(0,i.jsx)(n,{url:"https://join.slack.com/t/appcircleio/signup",title:"Slack",description:"No description available",image:"https://cdn.appcircle.io/docs/assets/appcircle-logo.png"})})})]})}function l(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},78764:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>o,contentTitle:()=>a,default:()=>p,frontMatter:()=>l,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"self-hosted-appcircle/install-server/helm-chart/configuration/ssl-configuration","title":"Helm SSL Configuration","description":"Learn how to configure SSL certificate for HTTPS connections","source":"@site/docs/self-hosted-appcircle/install-server/helm-chart/configuration/ssl-configuration.md","sourceDirName":"self-hosted-appcircle/install-server/helm-chart/configuration","slug":"/self-hosted-appcircle/install-server/helm-chart/configuration/ssl-configuration","permalink":"/self-hosted-appcircle/install-server/helm-chart/configuration/ssl-configuration","draft":false,"unlisted":false,"editUrl":"https://github.com/appcircleio/appcircle-docusaurus/tree/master/docs/self-hosted-appcircle/install-server/helm-chart/configuration/ssl-configuration.md","tags":[{"inline":false,"label":"self-hosted","permalink":"/tags/self-hosted","description":"Description for self-hosted"},{"inline":false,"label":"helm","permalink":"/tags/helm","description":"Helm related documentations"},{"inline":false,"label":"configuration","permalink":"/tags/configuration","description":"Description for configuration"},{"inline":false,"label":"kubernetes","permalink":"/tags/kubernetes","description":"Kubernetes related documentations"}],"version":"current","sidebarPosition":90,"frontMatter":{"title":"Helm SSL Configuration","description":"Learn how to configure SSL certificate for HTTPS connections","tags":["self-hosted","helm","configuration","kubernetes"],"sidebar_position":90,"sidebar_label":"SSL Configuration"},"sidebar":"mySidebar","previous":{"title":"LDAP Configuration","permalink":"/self-hosted-appcircle/install-server/helm-chart/configuration/ldap-configuration"},"next":{"title":"Advanced Configuration","permalink":"/self-hosted-appcircle/install-server/helm-chart/configuration/advanced-configuration"}}');var r=n(74848),s=n(28453),c=n(93978);const l={title:"Helm SSL Configuration",description:"Learn how to configure SSL certificate for HTTPS connections",tags:["self-hosted","helm","configuration","kubernetes"],sidebar_position:90,sidebar_label:"SSL Configuration"},a="Overview",o={},d=[{value:"Define the SSL Certificate in <code>values.yaml</code>",id:"define-the-ssl-certificate-in-valuesyaml",level:2},{value:"Initial SSL Configuration",id:"initial-ssl-configuration",level:3},{value:"Update the <code>values.yaml</code>",id:"update-the-valuesyaml",level:4},{value:"Updating the Certificate",id:"updating-the-certificate",level:3},{value:"Define the SSL Certificate in Secrets",id:"define-the-ssl-certificate-in-secrets",level:2},{value:"Initial SSL Configuration",id:"initial-ssl-configuration-1",level:3},{value:"Updating the <code>values.yaml</code>",id:"updating-the-valuesyaml",level:4},{value:"Create the Secret",id:"create-the-secret",level:4},{value:"Updating the Certificate",id:"updating-the-certificate-1",level:3},{value:"Final Steps",id:"final-steps",level:2},...c.RM];function h(e){const t={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.header,{children:(0,r.jsx)(t.h1,{id:"overview",children:"Overview"})}),"\n",(0,r.jsx)(t.p,{children:"This guide provides detailed instructions for configuring an SSL certificate for HTTPS connections in the Appcircle Helm chart."}),"\n",(0,r.jsx)(t.p,{children:"By default, the Helm chart is configured for HTTP without an SSL certificate. If you use Appcircle with HTTP, you need to open port 6379 on the ingress controller for Redis the connection."}),"\n",(0,r.jsx)(t.admonition,{type:"caution",children:(0,r.jsxs)(t.p,{children:["Appcircle must be installed with HTTPS from the initial installation. If you initially installed Appcircle with HTTP, you will need to ",(0,r.jsx)(t.a,{href:"/self-hosted-appcircle/install-server/helm-chart/uninstallation",children:"uninstall"})," it and then reinstall it with HTTPS."]})}),"\n",(0,r.jsx)(t.p,{children:"You have two options for configuring SSL certificates:"}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Trial Purposes"}),": Define the SSL certificate directly in the ",(0,r.jsx)(t.code,{children:"values.yaml"})," by following ",(0,r.jsx)(t.a,{href:"#define-the-ssl-certificate-in-valuesyaml",children:"this section"}),"."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Production"}),": Create a Kubernetes secret for better security and manageability by following ",(0,r.jsx)(t.a,{href:"#define-the-ssl-certificate-in-secrets",children:"this section"}),"."]}),"\n"]}),"\n",(0,r.jsx)(t.admonition,{type:"info",children:(0,r.jsxs)(t.p,{children:["When configuring Appcircle with HTTPS, you have the option to use self-signed or untrusted root certificates. However, if you choose to do so, it is essential to add the certificate or the root CA certificate to the trusted certificates. Failure to do this may result in connection errors. For detailed instructions about adding trusted CA certificates, refer to the ",(0,r.jsx)(t.a,{href:"/self-hosted-appcircle/install-server/helm-chart/configuration/ca-certificates",children:"Adding Trusted CA Certificates"})," documentation."]})}),"\n",(0,r.jsxs)(t.h2,{id:"define-the-ssl-certificate-in-valuesyaml",children:["Define the SSL Certificate in ",(0,r.jsx)(t.code,{children:"values.yaml"})]}),"\n",(0,r.jsx)(t.h3,{id:"initial-ssl-configuration",children:"Initial SSL Configuration"}),"\n",(0,r.jsxs)(t.h4,{id:"update-the-valuesyaml",children:["Update the ",(0,r.jsx)(t.code,{children:"values.yaml"})]}),"\n",(0,r.jsxs)(t.p,{children:["To configure the SSL certificate, update your ",(0,r.jsx)(t.code,{children:"values.yaml"})," file with the following settings:"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-yaml",children:"global:\n  urls:\n    scheme: https\n  tlsWildcard:\n    # Public certificate - Fullchain including leaf (app), intermediate and root SSL certificates\n    cert: |\n      -----BEGIN CERTIFICATE-----\n      MIIFzTCCBLWgAwIBAgISBMLn5uQI6Wmzku14xXUbbIbmMA0GCSqGSIb3DQEBCwUA\n      ...\n      SA==\n      -----END CERTIFICATE-----\n      -----BEGIN CERTIFICATE-----\n      MIIFBjCCAu6gAwIBAgIRAIp9PhPWLzDvI4a9KQdrNPgwDQYJKoZIhvcNAQELBQAw\n      ...\n      uYkQ4omYCTX5ohy+knMjdOmdH9c7SpqEWBDC86fiNex+O0XOMEZSa8DA\n      -----END CERTIFICATE-----\n      -----BEGIN CERTIFICATE-----\n      MIIFazCCA1OgAwIBAgIRAIIQz7DSQONZRGPgu2OCiwAwDQYJKoZIhvcNAQELBQAw\n      ...\n      emyPxgcYxn/eR44/KJ4EBs+lVDR3veyJm+kXQ99b21/+jh5Xos1AnX5iItreGCc=\n      -----END CERTIFICATE-----\n    # Private key for the SSL certificate\n    key: |\n      -----BEGIN PRIVATE KEY-----\n      MIIEvwIBADANBgkqhkiG9w0BAQEFAASCBKkwggSlAgEAAoIBAQC3wS87baGONXjr\n      ...\n      oUcjMAu/mGJjtn9AS0S7rRa58Q==\n      -----END PRIVATE KEY-----\n    # Certificate Authority public key - Typically the bottom certificate of the fullchain SSL certificate\n    caCert: |\n      -----BEGIN CERTIFICATE-----\n      MIIFazCCA1OgAwIBAgIRAIIQz7DSQONZRGPgu2OCiwAwDQYJKoZIhvcNAQELBQAw\n      ...\n      emyPxgcYxn/eR44/KJ4EBs+lVDR3veyJm+kXQ99b21/+jh5Xos1AnX5iItreGCc=\n      -----END CERTIFICATE-----\n\n# Web event Redis configuration\nwebeventredis:\n  # Enable TLS for Redis connections\n  tls:\n    enabled: true\n  # Ingress configuration for Redis\n  ingress:\n    enabled: true\n    tls: true\n"})}),"\n",(0,r.jsx)(t.h3,{id:"updating-the-certificate",children:"Updating the Certificate"}),"\n",(0,r.jsx)(t.p,{children:"To update the SSL certificate used on Appcircle server, perform the following steps to update the Helm chart and restart the required services:"}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:["Update the SSL certificate defined in the ",(0,r.jsx)(t.code,{children:"values.yaml"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsx)(t.p,{children:"Run the Helm upgrade command to apply the changes:"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"helm upgrade appcircle-server appcircle/appcircle -n appcircle -f values.yaml\n"})}),"\n",(0,r.jsxs)(t.ol,{start:"3",children:["\n",(0,r.jsx)(t.li,{children:"To restart the Redis service after updating the SSL certificate, you need to first filter and find the names of the stateful sets, as the names might change according to the release name. Use the following command to get the stateful sets:"}),"\n"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"kubectl get statefulset -n appcircle | grep webeventredis\n"})}),"\n",(0,r.jsxs)(t.ol,{start:"4",children:["\n",(0,r.jsx)(t.li,{children:"Restart the Redis StatefulSets to apply the changes:"}),"\n"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"kubectl rollout restart statefulset/appcircle-server-webeventredis-master -n appcircle\nkubectl rollout restart statefulset/appcircle-server-webeventredis-replicas -n appcircle\n"})}),"\n",(0,r.jsx)(t.h2,{id:"define-the-ssl-certificate-in-secrets",children:"Define the SSL Certificate in Secrets"}),"\n",(0,r.jsx)(t.h3,{id:"initial-ssl-configuration-1",children:"Initial SSL Configuration"}),"\n",(0,r.jsxs)(t.h4,{id:"updating-the-valuesyaml",children:["Updating the ",(0,r.jsx)(t.code,{children:"values.yaml"})]}),"\n",(0,r.jsxs)(t.p,{children:["To configure the SSL certificate, update your ",(0,r.jsx)(t.code,{children:"values.yaml"})," file with the following settings:"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-yaml",children:"global:\n  urls:\n    scheme: https\n# Web event Redis configuration\nwebeventredis:\n  # Enable TLS for Redis connections\n  tls:\n    enabled: true\n  # Ingress configuration for Redis\n  ingress:\n    enabled: true\n    tls: true\n"})}),"\n",(0,r.jsx)(t.h4,{id:"create-the-secret",children:"Create the Secret"}),"\n",(0,r.jsxs)(t.p,{children:["Create a secret with the name ",(0,r.jsx)(t.code,{children:"appcircle-tls-wildcard"})," containing the ",(0,r.jsx)(t.code,{children:"tls.crt"}),", ",(0,r.jsx)(t.code,{children:"tls.key"})," and ",(0,r.jsx)(t.code,{children:"ca.crt"})," keys."]}),"\n",(0,r.jsxs)(t.admonition,{type:"info",children:[(0,r.jsxs)(t.p,{children:["The certificate (",(0,r.jsx)(t.code,{children:"cert"}),") should be in PEM format and include the full-chain (leaf, intermediate, and root certificates)."]}),(0,r.jsxs)(t.p,{children:["The private key (",(0,r.jsx)(t.code,{children:"key"}),") should not be password-protected."]})]}),"\n",(0,r.jsx)(t.admonition,{type:"caution",children:(0,r.jsxs)(t.p,{children:["The name ",(0,r.jsx)(t.strong,{children:(0,r.jsx)(t.code,{children:"appcircle-tls-wildcard"})})," is ",(0,r.jsx)(t.strong,{children:"reserved"})," and ",(0,r.jsx)(t.strong,{children:"cannot be changed"}),"."]})}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"kubectl create secret generic appcircle-tls-wildcard \\\n  --from-file=tls.crt='fullchain.crt' \\\n  --from-file=tls.key='private.key' \\\n  --from-file=ca.crt='root-ca.crt' \\\n  --type=kubernetes.io/tls \\\n  -n appcircle\n"})}),"\n",(0,r.jsx)(t.h3,{id:"updating-the-certificate-1",children:"Updating the Certificate"}),"\n",(0,r.jsx)(t.p,{children:"To update an existing SSL certificate, use the following commands."}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsx)(t.li,{children:"Update the secret with the new certificate."}),"\n"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"kubectl create secret generic appcircle-tls-wildcard \\\n  -n appcircle \\\n  --from-file=tls.crt='fullchain.crt' \\\n  --from-file=tls.key='private.key' \\\n  --from-file=ca.crt='root-ca.crt' \\\n  --type=kubernetes.io/tls \\\n  --save-config --dry-run=client -o yaml | kubectl apply -f -\n"})}),"\n",(0,r.jsxs)(t.ol,{start:"2",children:["\n",(0,r.jsx)(t.li,{children:"To restart the Redis service after updating the SSL certificate, you need to first filter and find the names of the stateful sets, as the names might change according to the release name. Use the following command to get the stateful sets:"}),"\n"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"kubectl get statefulset -n appcircle | grep webeventredis\n"})}),"\n",(0,r.jsxs)(t.ol,{start:"3",children:["\n",(0,r.jsx)(t.li,{children:"Restart the Redis StatefulSets to apply the changes:"}),"\n"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"kubectl rollout restart statefulset/appcircle-server-webeventredis-master -n appcircle\nkubectl rollout restart statefulset/appcircle-server-webeventredis-replicas -n appcircle\n"})}),"\n",(0,r.jsx)(t.h2,{id:"final-steps",children:"Final Steps"}),"\n",(0,r.jsx)(t.p,{children:"Verify the SSL configuration by accessing the Appcircle server over HTTPS."}),"\n",(0,r.jsx)(c.Ay,{})]})}function p(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>c,x:()=>l});var i=n(96540);const r={},s=i.createContext(r);function c(e){const t=i.useContext(s);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),i.createElement(s.Provider,{value:t},e.children)}}}]);