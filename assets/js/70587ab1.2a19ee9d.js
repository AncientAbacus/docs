"use strict";(self.webpackChunkappcircle_docusaurus=self.webpackChunkappcircle_docusaurus||[]).push([[82594],{68340:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>a,contentTitle:()=>l,default:()=>h,frontMatter:()=>i,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"self-hosted-appcircle/install-server/helm-chart/faq","title":"Troubleshooting & FAQ","description":"Troubleshooting and FAQ","source":"@site/docs/self-hosted-appcircle/install-server/helm-chart/faq.md","sourceDirName":"self-hosted-appcircle/install-server/helm-chart","slug":"/self-hosted-appcircle/install-server/helm-chart/faq","permalink":"/self-hosted-appcircle/install-server/helm-chart/faq","draft":false,"unlisted":false,"editUrl":"https://github.com/appcircleio/appcircle-docusaurus/tree/master/docs/self-hosted-appcircle/install-server/helm-chart/faq.md","tags":[{"inline":false,"label":"troubleshooting","permalink":"/tags/troubleshooting","description":"Description for troubleshooting"},{"inline":false,"label":"faq","permalink":"/tags/faq","description":"Description for faq"},{"inline":false,"label":"self-hosted","permalink":"/tags/self-hosted","description":"Description for self-hosted"},{"inline":false,"label":"kubernetes","permalink":"/tags/kubernetes","description":"Kubernetes related documentations"}],"version":"current","sidebarPosition":60,"frontMatter":{"title":"Troubleshooting & FAQ","description":"Troubleshooting and FAQ","tags":["troubleshooting","faq","self-hosted","kubernetes"],"sidebar_position":60},"sidebar":"mySidebar","previous":{"title":"Uninstallation","permalink":"/self-hosted-appcircle/install-server/helm-chart/uninstallation"},"next":{"title":"Overview of Self-hosted Runner","permalink":"/self-hosted-appcircle/self-hosted-runner/"}}');var s=n(74848),o=n(28453);const i={title:"Troubleshooting & FAQ",description:"Troubleshooting and FAQ",tags:["troubleshooting","faq","self-hosted","kubernetes"],sidebar_position:60},l=void 0,a={},c=[{value:"When we try to login to the Appcircle server, we see <code>too many redirects</code> error from browser",id:"when-we-try-to-login-to-the-appcircle-server-we-see-too-many-redirects-error-from-browser",level:3},{value:"When we deploy the Helm chart, the <code>appcircle-server-webeventredis-master-0</code> pod is stuck in <code>CrashLoopBackOff</code> state",id:"when-we-deploy-the-helm-chart-the-appcircle-server-webeventredis-master-0-pod-is-stuck-in-crashloopbackoff-state",level:3},{value:"What should we do if the deployment hasn&#39;t been completed and timed out?",id:"what-should-we-do-if-the-deployment-hasnt-been-completed-and-timed-out",level:3},{value:"What should we do if we use an Ingress controller other then Nginx Ingress?",id:"what-should-we-do-if-we-use-an-ingress-controller-other-then-nginx-ingress",level:3}];function d(e){const t={a:"a",admonition:"admonition",code:"code",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(t.h3,{id:"when-we-try-to-login-to-the-appcircle-server-we-see-too-many-redirects-error-from-browser",children:["When we try to login to the Appcircle server, we see ",(0,s.jsx)(t.code,{children:"too many redirects"})," error from browser"]}),"\n",(0,s.jsxs)(t.p,{children:["This error usually happens when the pods can't resolve some of ",(0,s.jsx)(t.a,{href:"/self-hosted-appcircle/install-server/helm-chart/installation/kubernetes#1-domain-name",children:"the Appcircle server domains"}),"."]}),"\n",(0,s.jsx)(t.p,{children:"For the solution, please make sure that the domain name server of the worker nodes of the Kubernetes cluster can resolve the Appcircle server domain names."}),"\n",(0,s.jsxs)(t.h3,{id:"when-we-deploy-the-helm-chart-the-appcircle-server-webeventredis-master-0-pod-is-stuck-in-crashloopbackoff-state",children:["When we deploy the Helm chart, the ",(0,s.jsx)(t.code,{children:"appcircle-server-webeventredis-master-0"})," pod is stuck in ",(0,s.jsx)(t.code,{children:"CrashLoopBackOff"})," state"]}),"\n",(0,s.jsxs)(t.p,{children:["This error usually happens when you select a non-valid ",(0,s.jsx)(t.code,{children:"Appcircle CA Certificate File"})," while ",(0,s.jsx)(t.a,{href:"/self-hosted-appcircle/install-server/helm-chart/installation/kubernetes#1-create-valuesyaml",children:"creating the configuration file"}),". Please make sure that the certificate you choose is the ",(0,s.jsx)(t.strong,{children:"root"})," certificate of the full-chain certificate."]}),"\n",(0,s.jsx)(t.admonition,{type:"tip",children:(0,s.jsxs)(t.p,{children:["If you created the SSL/TLS certificate with LetsEncrypt, you should know that the ",(0,s.jsx)(t.code,{children:"fullchain.pem"})," file doesn't include the root CA certificate by default."]})}),"\n",(0,s.jsxs)(t.p,{children:["To fix the problem, you can edit the ",(0,s.jsx)(t.code,{children:"values.yaml"})," file and upgrade the Helm chart."]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"helm upgrade appcircle-server appcircle/appcircle \\\n  --timeout 1200s \\\n  -n appcircle \\\n  -f values.yaml\n"})}),"\n",(0,s.jsxs)(t.admonition,{type:"caution",children:[(0,s.jsxs)(t.p,{children:["The ",(0,s.jsx)(t.code,{children:"stateful"})," pods won't be recreated from a error state. This is known issue of Kubernetes."]}),(0,s.jsx)(t.p,{children:"You should delete the pods manually to fix this problem. The new updated pods will be created automatically. You can use the example commands below to delete the pods:"}),(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"kubectl delete pods appcircle-server-webeventredis-master-0 -n appcircle && \\\nkubectl delete pods appcircle-server-webeventredis-replicas-0 -n appcircle && \\\nkubectl delete pods appcircle-server-webeventredis-replicas-1 -n appcircle\n"})})]}),"\n",(0,s.jsx)(t.h3,{id:"what-should-we-do-if-the-deployment-hasnt-been-completed-and-timed-out",children:"What should we do if the deployment hasn't been completed and timed out?"}),"\n",(0,s.jsxs)(t.p,{children:["If the deployment hasn't completed and timed out after ",(0,s.jsx)(t.code,{children:"1200"})," seconds:"]}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Low Network Bandwidth or Insufficient Processing Power:"})," If the timeout occurred due to low network bandwidth or insufficient processing power, you can re-run the Helm deployment command as it is idempotent."]}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Configuration Issues:"})," If the timeout was caused by a configuration problem, you will need to troubleshoot the issue. Review your configuration settings and logs to identify and resolve any errors before attempting the deployment again."]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(t.admonition,{type:"tip",children:(0,s.jsxs)(t.p,{children:["If you face a timeout due to configuration problems, it is better to re-install Appcircle freshly. Refer to the ",(0,s.jsx)(t.a,{href:"/self-hosted-appcircle/install-server/helm-chart/uninstallation",children:"Uninstalling Appcircle"})," section for detailed instructions on how to uninstall and clean up the existing deployment before starting anew."]})}),"\n",(0,s.jsx)(t.h3,{id:"what-should-we-do-if-we-use-an-ingress-controller-other-then-nginx-ingress",children:"What should we do if we use an Ingress controller other then Nginx Ingress?"}),"\n",(0,s.jsxs)(t.p,{children:["If you are using an ingress controller other than the Nginx Ingress controller, you should add an additional annotation to the ",(0,s.jsx)(t.code,{children:"resource"})," ingress."]}),"\n",(0,s.jsxs)(t.p,{children:["By default, Appcircle adds the ",(0,s.jsx)(t.a,{href:"https://github.com/kubernetes/ingress-nginx/blob/main/docs/user-guide/nginx-configuration/annotations.md#custom-nginx-upstream-vhost",children:(0,s.jsx)(t.code,{children:"upstream vhost"})})," annotation. You should add alternative annotation for your ingress controller."]}),"\n",(0,s.jsxs)(t.p,{children:["For example, if you are using HAProxy as an Ingress controller, you should add the annotation to the ",(0,s.jsx)(t.code,{children:"values.yaml"})," of the Appcircle Helm chart:"]}),"\n",(0,s.jsx)(t.admonition,{type:"caution",children:(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.code,{children:"appcircle-server"})," below should be the Helm chart release name. In the installation document, we use ",(0,s.jsx)(t.code,{children:"appcircle-server"})," for the release name. You should change it if you changed the release name."]})}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-yaml",children:'resource:\n  ingress:\n    annotations: \n      haproxy.org/set-host: "appcircle-server-minio:9000"\n'})})]})}function h(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>i,x:()=>l});var r=n(96540);const s={},o=r.createContext(s);function i(e){const t=r.useContext(o);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),r.createElement(o.Provider,{value:t},e.children)}}}]);