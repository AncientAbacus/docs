"use strict";(self.webpackChunkappcircle_docusaurus=self.webpackChunkappcircle_docusaurus||[]).push([[52050],{77319:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>u,frontMatter:()=>l,metadata:()=>r,toc:()=>o});const r=JSON.parse('{"id":"infrastructure/android-build-infrastructure","title":"Android Build Stacks","description":"Learn about the Android build stacks in Appcircle","source":"@site/docs/infrastructure/android-build-infrastructure.md","sourceDirName":"infrastructure","slug":"/infrastructure/android-build-infrastructure","permalink":"/infrastructure/android-build-infrastructure","draft":false,"unlisted":false,"editUrl":"https://github.com/appcircleio/appcircle-docusaurus/tree/master/docs/infrastructure/android-build-infrastructure.md","tags":[{"inline":false,"label":"build","permalink":"/tags/build","description":"Description for build"},{"inline":false,"label":"android","permalink":"/tags/android","description":"Description for android"},{"inline":false,"label":"build stacks","permalink":"/tags/build-stacks","description":"Description for build stacks"}],"version":"current","sidebarPosition":2,"frontMatter":{"title":"Android Build Stacks","description":"Learn about the Android build stacks in Appcircle","tags":["build","android","build stacks"],"sidebar_position":2},"sidebar":"mySidebar","previous":{"title":"iOS Build Stacks","permalink":"/infrastructure/ios-build-infrastructure"},"next":{"title":"My Account / My Organization","permalink":"/account/"}}');var s=i(74848),d=i(28453),t=i(70344);const l={title:"Android Build Stacks",description:"Learn about the Android build stacks in Appcircle",tags:["build","android","build stacks"],sidebar_position:2},c="Android Build Stacks",a={},o=[{value:"Java Version",id:"java-version",level:2},{value:"Emulator",id:"emulator",level:2},{value:"Android Build Agent Stacks",id:"android-build-agent-stacks",level:2},{value:"Using your own computer for build",id:"using-your-own-computer-for-build",level:3}];function h(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,d.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"android-build-stacks",children:"Android Build Stacks"})}),"\n",(0,s.jsx)(n.p,{children:"For each Android build, Appcircle creates a brand new virtual machine;"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:'If you select "Appcircle Linux Pool (x86_64)", virtual machine will be Debian 11 Bullseye.'}),"\n",(0,s.jsxs)(n.li,{children:['If you select "Appcircle Standard macOS Pool (arm64)", virtual machine will be macOS Sonoma ',(0,s.jsx)(n.code,{children:"14.5"})," or macOS Monterey ",(0,s.jsx)(n.code,{children:"12.6"}),"."]}),"\n"]}),"\n",(0,s.jsxs)(n.admonition,{type:"info",children:[(0,s.jsx)(n.p,{children:"If you select Appcircle Standard macOS Pool (arm64), you can not choose macOS version. It will be automatically selected by Appcircle."}),(0,s.jsx)(n.p,{children:"The chance is equal for both macOS Sonoma and macOS Monterey for your android build because it does not effect your build."})]}),"\n",(0,s.jsx)(n.p,{children:"Virtual machines are created and they become ready for build within seconds."}),"\n",(0,s.jsx)(n.p,{children:"During the build process, you can install any dependencies and run commands using custom script steps in the build workflow. This gives you complete control over your build and the virtual machine."}),"\n",(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsx)(n.p,{children:"Please note that virtual machines are wiped off after a build is executed (no matter success or fail) and anything you installed in the virtual machine will be gone."})}),"\n",(0,s.jsx)(n.h2,{id:"java-version",children:"Java Version"}),"\n",(0,s.jsx)(n.p,{children:"Build agents have Java 8, 11, 17 and 21 installed. Java 17 is set as the default version."}),"\n",(0,s.jsxs)(n.p,{children:["If you want to use a different Java version, please add the ",(0,s.jsx)(n.a,{href:"/workflows/common-workflow-steps/select-java-version",children:"Select Java Version"})," component to your workflow."]}),"\n",(0,s.jsx)(n.p,{children:'When you select "Appcircle Linux Pool (x86_64)" for Android builds, the following JDK locations are available within the environment variables:'}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"JAVA_HOME_8_X64"}),": ",(0,s.jsx)(n.code,{children:"/root/.sdkman/candidates/java/8.0.392-zulu"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"JAVA_HOME_11_X64"}),": ",(0,s.jsx)(n.code,{children:"/root/.sdkman/candidates/java/11.0.21-zulu"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"JAVA_HOME_17_X64"}),": ",(0,s.jsx)(n.code,{children:"/root/.sdkman/candidates/java/17.0.9-zulu"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"JAVA_HOME_21_X64"}),": ",(0,s.jsx)(n.code,{children:"/root/.sdkman/candidates/java/21.0.2-zulu"})]}),"\n"]}),"\n",(0,s.jsxs)(n.admonition,{type:"tip",children:[(0,s.jsx)(n.p,{children:"We're deprecating Intel-based runners and transitioning our customers to Apple silicon-based (M-series) build machines."}),(0,s.jsx)(n.p,{children:'Although Intel-based runners are actively maintained, if your app does not specifically require an Intel-based build machine, we suggest using the "Appcircle Standard macOS Pool (arm64)", since it has much more build capacity and the latest updates as well.'})]}),"\n",(0,s.jsx)(n.p,{children:'When you select "Appcircle Standard macOS Pool (arm64)" for Android builds, the following JDK locations are available within the environment variables:'}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"JAVA_HOME_8_X64"}),": ",(0,s.jsx)(n.code,{children:"/Users/appcircle/.sdkman/candidates/java/8.0.392-zulu"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"JAVA_HOME_11_X64"}),": ",(0,s.jsx)(n.code,{children:"/Users/appcircle/.sdkman/candidates/java/11.0.21-zulu"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"JAVA_HOME_17_X64"}),": ",(0,s.jsx)(n.code,{children:"/Users/appcircle/.sdkman/candidates/java/17.0.9-zulu"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"JAVA_HOME_21_X64"}),": ",(0,s.jsx)(n.code,{children:"/Users/appcircle/.sdkman/candidates/java/21.0.2-zulu"})]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"emulator",children:"Emulator"}),"\n",(0,s.jsxs)(n.p,{children:["Build agents have Pixel_3a Android 9.0 emulator pre-installed. You may add or remove other emulators by using ",(0,s.jsx)(n.code,{children:"sdkmanager"}),".\nFor example, in order to install Android 11 (API 30) emulator to x86_64 Linux, you can take the below steps:"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"1."})," Install emulator system image if not exists. (If it exists, the command will return quickly with success.)"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'sdkmanager "system-images;android-30;google_apis;x86_64"\n'})}),"\n",(0,s.jsx)(n.p,{children:"You can see a list of available system images with the below command:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'sdkmanager --list | grep "system-images;android"\n'})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"2."}),' Create new pixel_3a device with "Pixel_Custom" emulator name.']}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'avdmanager create avd -n Pixel_Custom -k "system-images;android-30;google_apis;x86_64" -c 512M -d pixel_3a\n'})}),"\n",(0,s.jsxs)(n.p,{children:["When completed with success, you should see below the device with ",(0,s.jsx)(n.code,{children:"avdmanager list avd"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-txt",children:"    Name: Pixel_Custom\n  Device: pixel_3a (Google)\n    Path: /users/appcircle/.android/avd/Pixel_Custom.avd\n  Target: Google APIs (Google Inc.)\nBased on: Android 11.0 (R)\n Tag/ABI: google_apis/x86_64\n  Sdcard: 512 MB\n"})}),"\n",(0,s.jsx)(n.admonition,{type:"caution",children:(0,s.jsxs)(n.p,{children:["If you're using UI tests with emulators, you must select an Intel device (",(0,s.jsx)(n.strong,{children:"Appcircle Linux Pool (x86_64)"}),") since M-series virtual machines (",(0,s.jsx)(n.strong,{children:"Appcircle Standard macOS Pool (arm64)"}),") don't support nested virtualization."]})}),"\n",(0,s.jsx)(n.h2,{id:"android-build-agent-stacks",children:"Android Build Agent Stacks"}),"\n",(0,s.jsx)(n.p,{children:"There are many pre-installed packages in virtual machines. You can get a full list of pre-installed packages by running Bash commands in custom script steps."}),"\n",(0,s.jsx)(n.p,{children:"Here are some most important packages installed in our Linux and macOS images used for Android builds:"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Package"}),(0,s.jsx)(n.th,{children:"Debian Bullseye"}),(0,s.jsx)(n.th,{children:"macOS Sonoma"}),(0,s.jsx)(n.th,{children:"\xa0macOS Monterey"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Apt Package Manager"}),(0,s.jsx)(n.td,{children:"2.2.4"}),(0,s.jsx)(n.td,{children:"n/A"}),(0,s.jsx)(n.td,{children:"n/A"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Bash"}),(0,s.jsx)(n.td,{children:"5.1.4"}),(0,s.jsx)(n.td,{children:"3.2.57"}),(0,s.jsx)(n.td,{children:"3.2.57"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"GNU Binutils"}),(0,s.jsx)(n.td,{children:"2.35.2"}),(0,s.jsx)(n.td,{children:"2.42"}),(0,s.jsx)(n.td,{children:"2.39"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Bzip2"}),(0,s.jsx)(n.td,{children:"1.0.8"}),(0,s.jsx)(n.td,{children:"n/A"}),(0,s.jsx)(n.td,{children:"n/A"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Curl"}),(0,s.jsx)(n.td,{children:"7.74.0"}),(0,s.jsx)(n.td,{children:"8.6.0"}),(0,s.jsx)(n.td,{children:"7.79.1"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"GCC"}),(0,s.jsx)(n.td,{children:"10.2.1"}),(0,s.jsx)(n.td,{children:"16.0.0"}),(0,s.jsx)(n.td,{children:"14.0.0"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Git"}),(0,s.jsx)(n.td,{children:"2.35.1"}),(0,s.jsx)(n.td,{children:"2.45.2"}),(0,s.jsx)(n.td,{children:"2.38.1"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Git LFS"}),(0,s.jsx)(n.td,{children:"2.13.2"}),(0,s.jsx)(n.td,{children:"3.5.1"}),(0,s.jsx)(n.td,{children:"3.2.0"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Gradle"}),(0,s.jsx)(n.td,{children:"4.4.1"}),(0,s.jsx)(n.td,{children:"8.8"}),(0,s.jsx)(n.td,{children:"7.5.1"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Gzip"}),(0,s.jsx)(n.td,{children:"1.10"}),(0,s.jsx)(n.td,{children:"430.100.5"}),(0,s.jsx)(n.td,{children:"353.100.22"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Java"}),(0,s.jsx)(n.td,{children:"17.0.9"}),(0,s.jsx)(n.td,{children:"17.0.9"}),(0,s.jsx)(n.td,{children:"17.0.9"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Maven"}),(0,s.jsx)(n.td,{children:"3.9.9"}),(0,s.jsx)(n.td,{children:"3.9.7"}),(0,s.jsx)(n.td,{children:"3.8.6"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Node JS"}),(0,s.jsx)(n.td,{children:"18.20.5"}),(0,s.jsx)(n.td,{children:"18.20.3"}),(0,s.jsx)(n.td,{children:"18.19.1"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"OpenSSL"}),(0,s.jsx)(n.td,{children:"1.1.1"}),(0,s.jsx)(n.td,{children:"3.3.6"}),(0,s.jsx)(n.td,{children:"2.8.3"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Perl"}),(0,s.jsx)(n.td,{children:"5.32.1"}),(0,s.jsx)(n.td,{children:"5.34.1"}),(0,s.jsx)(n.td,{children:"5.30.3"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Python"}),(0,s.jsx)(n.td,{children:"3.9.2"}),(0,s.jsx)(n.td,{children:"3.12.3"}),(0,s.jsx)(n.td,{children:"3.10.8"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Rake"}),(0,s.jsx)(n.td,{children:"13.2.1"}),(0,s.jsx)(n.td,{children:"13.0.6"}),(0,s.jsx)(n.td,{children:"13.0.1"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Rbenv"}),(0,s.jsx)(n.td,{children:"1.3.0"}),(0,s.jsx)(n.td,{children:"1.2.0"}),(0,s.jsx)(n.td,{children:"1.2.0"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Ruby"}),(0,s.jsx)(n.td,{children:"3.2.3"}),(0,s.jsx)(n.td,{children:"3.2.3"}),(0,s.jsx)(n.td,{children:"2.7.5"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Unzip"}),(0,s.jsx)(n.td,{children:"6.00"}),(0,s.jsx)(n.td,{children:"6.00"}),(0,s.jsx)(n.td,{children:"6.00"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Wget"}),(0,s.jsx)(n.td,{children:"1.21"}),(0,s.jsx)(n.td,{children:"1.24.5"}),(0,s.jsx)(n.td,{children:"1.21"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Yarn"}),(0,s.jsx)(n.td,{children:"1.22.22"}),(0,s.jsx)(n.td,{children:"1.22.22"}),(0,s.jsx)(n.td,{children:"1.22.19"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Zip"}),(0,s.jsx)(n.td,{children:"3.0"}),(0,s.jsx)(n.td,{children:"3.0"}),(0,s.jsx)(n.td,{children:"3.0"})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"using-your-own-computer-for-build",children:"Using your own computer for build"}),"\n",(0,s.jsx)(n.p,{children:"Appcircle supports using a third-party computer to perform builds. You can create your own build environment by installing the operating system and other tools and dependencies you need to tell Appcircle to use that environment to perform builds."}),"\n",(0,s.jsx)(t.A,{url:"/self-hosted-appcircle/self-hosted-runner",children:(0,s.jsx)(n.p,{children:"Appcircle Self-hosted Runner"})})]})}function u(e={}){const{wrapper:n}={...(0,d.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},70344:(e,n,i)=>{i.d(n,{A:()=>a});var r,s,d=i(96540);function t(){return t=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var r in i)({}).hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e},t.apply(null,arguments)}const l=e=>{let{title:n,titleId:i,...l}=e;return d.createElement("svg",t({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,className:"feather feather-file-text",viewBox:"0 0 24 24","aria-labelledby":i},l),n?d.createElement("title",{id:i},n):null,r||(r=d.createElement("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"})),s||(s=d.createElement("path",{d:"M14 2v6h6M16 13H8M16 17H8M10 9H8"})))};var c=i(74848);function a(e){let{children:n,url:i}=e;return(0,c.jsxs)("a",{href:i,className:"content-ref-card",children:[(0,c.jsx)(l,{title:"File Icon",className:"file-icon"}),n]})}},28453:(e,n,i)=>{i.d(n,{R:()=>t,x:()=>l});var r=i(96540);const s={},d=r.createContext(s);function t(e){const n=r.useContext(d);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:t(e.components),r.createElement(d.Provider,{value:n},e.children)}}}]);