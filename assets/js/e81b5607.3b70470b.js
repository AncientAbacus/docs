"use strict";(self.webpackChunkappcircle_docusaurus=self.webpackChunkappcircle_docusaurus||[]).push([[79779],{32211:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>a,contentTitle:()=>l,default:()=>p,frontMatter:()=>o,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"workflows/android-specific-workflow-steps/android-sign","title":"Android Sign","description":"This step signs your APK or AAB with the given Android keystore and exports a binary file compatible with Android devices.","source":"@site/docs/workflows/android-specific-workflow-steps/android-sign.md","sourceDirName":"workflows/android-specific-workflow-steps","slug":"/workflows/android-specific-workflow-steps/android-sign","permalink":"/workflows/android-specific-workflow-steps/android-sign","draft":false,"unlisted":false,"editUrl":"https://github.com/appcircleio/appcircle-docusaurus/tree/master/docs/workflows/android-specific-workflow-steps/android-sign.md","tags":[{"inline":false,"label":"android","permalink":"/tags/android","description":"Description for android"},{"inline":false,"label":"mobile","permalink":"/tags/mobile","description":"Description for mobile"},{"inline":false,"label":"sign","permalink":"/tags/sign","description":"Description for sign"}],"version":"current","frontMatter":{"title":"Android Sign","description":"This step signs your APK or AAB with the given Android keystore and exports a binary file compatible with Android devices.","tags":["android","mobile","sign"]},"sidebar":"mySidebar","previous":{"title":"Android Dependency Report","permalink":"/workflows/android-specific-workflow-steps/android-dependency-report"},"next":{"title":"Android Unit Tests","permalink":"/workflows/android-specific-workflow-steps/android-unit-tests"}}');var t=n(74848),r=n(28453),d=n(69678);const o={title:"Android Sign",description:"This step signs your APK or AAB with the given Android keystore and exports a binary file compatible with Android devices.",tags:["android","mobile","sign"]},l="Android Sign",a={},c=[{value:"Prerequisites",id:"prerequisites",level:3},{value:"Input Variables",id:"input-variables",level:3},{value:"Output Variables",id:"output-variables",level:3}];function h(e){const i={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",em:"em",h1:"h1",h3:"h3",header:"header",hr:"hr",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,r.R)(),...e.components},{ExternalUrlRef:n}=i;return n||function(e,i){throw new Error("Expected "+(i?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("ExternalUrlRef",!0),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.header,{children:(0,t.jsx)(i.h1,{id:"android-sign",children:"Android Sign"})}),"\n",(0,t.jsxs)(i.p,{children:[(0,t.jsx)(i.strong,{children:"Android Sign"})," step signs your ",(0,t.jsx)(i.em,{children:"APK"})," or ",(0,t.jsx)(i.em,{children:"AAB"})," with the given Android ",(0,t.jsx)(i.em,{children:"keystore"})," and exports a binary file compatible with Android devices."]}),"\n",(0,t.jsx)(i.admonition,{type:"info",children:(0,t.jsxs)(i.p,{children:["This step follows the ",(0,t.jsx)(i.a,{href:"/workflows/android-specific-workflow-steps/android-build",children:(0,t.jsx)(i.strong,{children:"Android Build"})})," step to sign the unsigned build output if the project doesn't include a ",(0,t.jsx)(i.em,{children:"keystore"}),". If your project includes a ",(0,t.jsx)(i.em,{children:"keystore"}),", the build application step will generate a signed artifact. If you do not disable this step, your artifact will be unsigned and then re-signed using the ",(0,t.jsx)(i.em,{children:"keystore"})," selected in the ",(0,t.jsx)(i.strong,{children:"Configuration"})," or in this step."]})}),"\n",(0,t.jsxs)(i.admonition,{title:"Debug Variant Signing",type:"caution",children:[(0,t.jsxs)(i.p,{children:["As noted in the ",(0,t.jsx)(i.a,{href:"https://developer.android.com/build/build-for-release",children:(0,t.jsx)(i.strong,{children:"Android Developer documentation"})}),":"]}),(0,t.jsxs)(i.blockquote,{children:["\n",(0,t.jsxs)(i.p,{children:["If the build variant you've selected is a debug build type, then the APK is signed with a debug key and it's ready to install. If you've selected a release variant, then, by default, the APK is unsigned and you must manually ",(0,t.jsx)(i.a,{href:"https://developer.android.com/studio/publish/app-signing",children:"sign the APK"}),"."]}),"\n"]}),(0,t.jsxs)(i.p,{children:["When you build your app with the ",(0,t.jsx)(i.strong,{children:"debug"})," variant and select a keystore in ",(0,t.jsx)(i.a,{href:"/build/platform-build-guides/building-android-applications#signing",children:"configurations"}),", the ",(0,t.jsx)(i.strong,{children:"Android Sign"})," step will replace the default debug signing files and re-sign the app using the specified keystore files."]})]}),"\n",(0,t.jsx)(i.h3,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,t.jsxs)(i.p,{children:["Before running the ",(0,t.jsx)(i.strong,{children:"Android Sign"})," step, you must complete certain prerequisites, as detailed in the table below:"]}),"\n",(0,t.jsxs)(i.table,{children:[(0,t.jsx)(i.thead,{children:(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.th,{children:"Prerequisite Workflow Step"}),(0,t.jsx)(i.th,{children:"Description"})]})}),(0,t.jsxs)(i.tbody,{children:[(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:(0,t.jsx)(i.a,{href:"/workflows/common-workflow-steps/git-clone",children:(0,t.jsx)(i.strong,{children:"Git Clone"})})}),(0,t.jsxs)(i.td,{children:["This step relies on the ",(0,t.jsx)(i.strong,{children:"Android Build"})," step and the ",(0,t.jsx)(i.strong,{children:"Git Clone"})," step is necessary for the ",(0,t.jsx)(i.strong,{children:"Android Build"})," step to run successfully."]})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:(0,t.jsx)(i.a,{href:"/workflows/android-specific-workflow-steps/android-build",children:(0,t.jsx)(i.strong,{children:"Android Build"})})}),(0,t.jsxs)(i.td,{children:["The app required for this step is generated by the ",(0,t.jsx)(i.strong,{children:"Android Build"})," (or alternative build steps)."]})]})]})]}),"\n",(0,t.jsx)(i.admonition,{type:"caution",children:(0,t.jsxs)(i.p,{children:["If a step other than the ",(0,t.jsx)(i.strong,{children:"Android Build"})," step is used to build an app, then the ",(0,t.jsx)(i.strong,{children:"Android Sign"})," step depends on this step."]})}),"\n",(0,t.jsx)(d.A,{url:"https://cdn.appcircle.io/docs/assets/android-workflow-components-android-sign_0.png",alt:"image1"}),"\n",(0,t.jsx)(i.admonition,{type:"danger",children:(0,t.jsxs)(i.p,{children:["To share the signed apps created as an output of this step or to view them on the ",(0,t.jsx)(i.a,{href:"/workflows/common-workflow-steps/export-build-artifacts#download-exported-artifacts",children:(0,t.jsx)(i.strong,{children:"Download Artifacts"})})," page, please ensure that the ",(0,t.jsx)(i.a,{href:"/workflows/common-workflow-steps/export-build-artifacts",children:(0,t.jsx)(i.strong,{children:"Export Build Artifacts"})})," step is included in your workflow after this step."]})}),"\n",(0,t.jsx)(i.h3,{id:"input-variables",children:"Input Variables"}),"\n",(0,t.jsx)(i.p,{children:"This step contains some input variable(s). It needs these variable(s) to work. The table below gives explanation for this variable(s)."}),"\n",(0,t.jsx)(d.A,{url:"https://cdn.appcircle.io/docs/assets/android-workflow-components-android-sign_1.png",alt:"image1"}),"\n",(0,t.jsxs)(i.table,{children:[(0,t.jsx)(i.thead,{children:(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.th,{children:"Variable Name"}),(0,t.jsx)(i.th,{children:"Description"}),(0,t.jsx)(i.th,{children:"Status"})]})}),(0,t.jsxs)(i.tbody,{children:[(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:(0,t.jsx)(i.code,{children:"$AC_APK_PATH"})}),(0,t.jsxs)(i.td,{children:["The path of the ",(0,t.jsx)(i.em,{children:"APK"})," file. This path is automatically generated in the ",(0,t.jsx)(i.strong,{children:"Android Build"})," step. You may need to modify this input variable to provide a different path."]}),(0,t.jsx)(i.td,{children:"Required"})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:(0,t.jsx)(i.code,{children:"$AC_AAB_PATH"})}),(0,t.jsxs)(i.td,{children:["The path of the ",(0,t.jsx)(i.em,{children:"AAB"})," file. This path is automatically generated in the ",(0,t.jsx)(i.strong,{children:"Android Build"})," step. You may need to modify this input variable to provide a different path."]}),(0,t.jsx)(i.td,{children:"Required"})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:(0,t.jsx)(i.code,{children:"$AC_ANDROID_KEYSTORE_PATH"})}),(0,t.jsxs)(i.td,{children:[(0,t.jsx)(i.em,{children:"Keystore"})," file can be selected in the ",(0,t.jsx)(i.strong,{children:"Configuration"}),". This value will be auto-generated depending on your ",(0,t.jsx)(i.em,{children:"keystore"})," file selection in ",(0,t.jsx)(i.a,{href:"/build/platform-build-guides/building-android-applications#signing",children:"signing configuration on Appcircle"}),"."]}),(0,t.jsx)(i.td,{children:"Required"})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:(0,t.jsx)(i.code,{children:"$AC_ANDROID_KEYSTORE_PASSWORD"})}),(0,t.jsxs)(i.td,{children:["Password for the selected ",(0,t.jsx)(i.em,{children:"keystore"})," file. This value will be auto-generated based on your ",(0,t.jsx)(i.em,{children:"keystore"})," file selection."]}),(0,t.jsx)(i.td,{children:"Required"})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:(0,t.jsx)(i.code,{children:"$AC_ANDROID_ALIAS"})}),(0,t.jsxs)(i.td,{children:["Alias name for the selected ",(0,t.jsx)(i.em,{children:"keystore"})," file. This value will be auto-generated depending on your ",(0,t.jsx)(i.strong,{children:"Configuration"})]}),(0,t.jsx)(i.td,{})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:(0,t.jsx)(i.code,{children:"$AC_ANDROID_ALIAS_PASSWORD"})}),(0,t.jsxs)(i.td,{children:["Alias password for the selected ",(0,t.jsx)(i.em,{children:"keystore"})," file. This value will be auto-generated depending on your ",(0,t.jsx)(i.strong,{children:"Configuration"})]}),(0,t.jsx)(i.td,{})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:(0,t.jsx)(i.code,{children:"$AC_V2_SIGN"})}),(0,t.jsxs)(i.td,{children:["Defaults to false. Set true if the signature should be done using apksigner instead of jarsigner. For more information, ",(0,t.jsx)(i.a,{href:"https://developer.android.com/about/versions/11/behavior-changes-11#minimum-signature-scheme",children:"Apps targeting Android 11 require APK Signature Scheme v2"}),"."]}),(0,t.jsx)(i.td,{children:"Optional"})]})]})]}),"\n",(0,t.jsx)(i.h3,{id:"output-variables",children:"Output Variables"}),"\n",(0,t.jsx)(i.p,{children:"The output(s) resulting from the operation of this component are as follows:"}),"\n",(0,t.jsx)(d.A,{url:"https://cdn.appcircle.io/docs/assets/android-workflow-components-android-sign_2.png",alt:"image2"}),"\n",(0,t.jsxs)(i.table,{children:[(0,t.jsx)(i.thead,{children:(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.th,{children:"Variable Name"}),(0,t.jsx)(i.th,{children:"Description"})]})}),(0,t.jsxs)(i.tbody,{children:[(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:(0,t.jsx)(i.code,{children:"AC_SIGNED_APK_PATH"})}),(0,t.jsxs)(i.td,{children:["Path for the signed ",(0,t.jsx)(i.em,{children:"APK"})," file output. If an ",(0,t.jsx)(i.em,{children:"APK"})," file is provided as input, the signed app will also be in ",(0,t.jsx)(i.em,{children:"APK"})," format."]})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:(0,t.jsx)(i.code,{children:"AC_SIGNED_AAB_PATH"})}),(0,t.jsxs)(i.td,{children:["Path for the signed App Bundle file output. If an ",(0,t.jsx)(i.em,{children:"AAB"})," file is provided as input, the signed app will also be in ",(0,t.jsx)(i.em,{children:"AAB"})," format."]})]})]})]}),"\n",(0,t.jsx)(i.admonition,{type:"tip",children:(0,t.jsxs)(i.p,{children:["If both input value types (",(0,t.jsx)(i.em,{children:"AAB"})," and ",(0,t.jsx)(i.em,{children:"APK"}),") are provided, the same type of signed app will be generated for both."]})}),"\n",(0,t.jsx)(i.hr,{}),"\n",(0,t.jsx)(i.p,{children:"To access the source code of this component, please use the following link:"}),"\n",(0,t.jsx)(i.p,{children:(0,t.jsx)(i.a,{href:"https://github.com/appcircleio/appcircle-android-sign-component.git",children:(0,t.jsx)(n,{url:"https://github.com/appcircleio/appcircle-android-sign-component.git",title:"GitHub - appcircleio/appcircle-android-sign-component",description:"Contribute to appcircleio/appcircle-android-sign-component development by creating an account on GitHub.",image:"https://opengraph.githubassets.com/8d10ea42c7c7ff084bc65e2e3587ea7b4a03a30de62d8b2b649340a5e4868a6d/appcircleio/appcircle-android-sign-component"})})})]})}function p(e={}){const{wrapper:i}={...(0,r.R)(),...e.components};return i?(0,t.jsx)(i,{...e,children:(0,t.jsx)(h,{...e})}):h(e)}},69678:(e,i,n)=>{n.d(i,{A:()=>t});n(96540);var s=n(74848);function t(e){let{url:i,alt:n}=e;return(0,s.jsx)("img",{className:"screenshot",src:i,alt:n||"Screenshot"})}},28453:(e,i,n)=>{n.d(i,{R:()=>d,x:()=>o});var s=n(96540);const t={},r=s.createContext(t);function d(e){const i=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function o(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:d(e.components),s.createElement(r.Provider,{value:i},e.children)}}}]);