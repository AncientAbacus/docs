"use strict";(self.webpackChunkappcircle_docusaurus=self.webpackChunkappcircle_docusaurus||[]).push([[91821],{3074:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>c,contentTitle:()=>a,default:()=>p,frontMatter:()=>o,metadata:()=>n,toc:()=>l});const n=JSON.parse('{"id":"continuous-testing/react-native-testing/react-native-ui-test-with-detox","title":"UI Test with Detox","description":"Learn effectively run UI test with Detox to ensure quality of React Native projects.","source":"@site/docs/continuous-testing/react-native-testing/react-native-ui-test-with-detox.md","sourceDirName":"continuous-testing/react-native-testing","slug":"/continuous-testing/react-native-testing/react-native-ui-test-with-detox","permalink":"/continuous-testing/react-native-testing/react-native-ui-test-with-detox","draft":false,"unlisted":false,"editUrl":"https://github.com/appcircleio/appcircle-docusaurus/tree/master/docs/continuous-testing/react-native-testing/react-native-ui-test-with-detox.md","tags":[{"inline":false,"label":"detox","permalink":"/tags/detox","description":"Description for detox"},{"inline":false,"label":"test","permalink":"/tags/test","description":"Description for test"},{"inline":false,"label":"UI tests","permalink":"/tags/ui-tests","description":"Description for UI tests"},{"inline":false,"label":"quality assurance","permalink":"/tags/quality-assurance","description":"Description for quality assurance"}],"version":"current","frontMatter":{"title":"UI Test with Detox","description":"Learn effectively run UI test with Detox to ensure quality of React Native projects.","tags":["detox","test","ui tests","quality assurance"]},"sidebar":"mySidebar","previous":{"title":"React Native Testing","permalink":"/continuous-testing/react-native-testing/"},"next":{"title":"Unit Test with Jest","permalink":"/continuous-testing/react-native-testing/react-native-unit-test-with-jest"}}');var i=s(74848),r=s(28453);const o={title:"UI Test with Detox",description:"Learn effectively run UI test with Detox to ensure quality of React Native projects.",tags:["detox","test","ui tests","quality assurance"]},a="React Native UI Test on Appcircle",c={},l=[{value:"Configuring Detox for Execution on Appcircle",id:"configuring-detox-for-execution-on-appcircle",level:2},{value:"Performing React Native UI tests in Appcircle",id:"performing-react-native-ui-tests-in-appcircle",level:2},{value:"Generating Test Report",id:"generating-test-report",level:2},{value:"Showing Test Reports",id:"showing-test-reports",level:2}];function d(e){const t={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components},{Screenshot:s}=t;return s||function(e,t){throw new Error("Expected "+(t?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Screenshot",!0),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.header,{children:(0,i.jsx)(t.h1,{id:"react-native-ui-test-on-appcircle",children:"React Native UI Test on Appcircle"})}),"\n",(0,i.jsx)(t.p,{children:"UI Testing with Detox for React Native ensures the reliability and performance of mobile apps by automating interactions and validating the user experience on real devices and simulators across platforms."}),"\n",(0,i.jsx)(t.h2,{id:"configuring-detox-for-execution-on-appcircle",children:"Configuring Detox for Execution on Appcircle"}),"\n",(0,i.jsxs)(t.p,{children:["When you configure Detox using the ",(0,i.jsx)(t.code,{children:"detox init"})," command, it creates an ",(0,i.jsx)(t.strong,{children:"e2e"})," folder and a ",(0,i.jsx)(t.code,{children:"jest.config.js"})," file. Since Detox runs on Jest, you\u2019ll need to set up Jest properly to generate test reports."]}),"\n",(0,i.jsxs)(t.p,{children:["Default Jest generates test results as JSON, but the ",(0,i.jsx)(t.strong,{children:"React Native UI Test"})," requires junit style for parsing the test results."]}),"\n",(0,i.jsxs)(t.ol,{children:["\n",(0,i.jsxs)(t.li,{children:["First add\xa0",(0,i.jsx)(t.strong,{children:"jest-junit"})," to your project as a dev dependency by simply running the below command."]}),"\n"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-bash",children:"  yarn add -D jest-junit\n"})}),"\n",(0,i.jsxs)(t.ol,{start:"2",children:["\n",(0,i.jsxs)(t.li,{children:["Open ",(0,i.jsx)(t.code,{children:"e2e/jest.config.js"})," file and add the below report configuration to get reports junit style:"]}),"\n"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{children:"  reporters: [\n    'detox/runners/jest/reporter',\n    [\n      'jest-junit',\n      {\n        outputDirectory: './test-reports',\n        outputName: 'e2e-report.xml',\n      },\n    ],\n  ],\n"})}),"\n",(0,i.jsxs)(t.ol,{start:"3",children:["\n",(0,i.jsxs)(t.li,{children:["Ensure that your ",(0,i.jsx)(t.code,{children:".detoxrc.js"}),", file contains a valid configuration, as the workflow step requires which configuration to build and run. An example configuration might look like this:"]}),"\n"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-js",children:"  configurations: {\n    'ios.sim.debug': {\n      device: 'simulator',\n      app: 'ios.debug',\n    },\n    'ios.sim.release': {\n      device: 'simulator',\n      app: 'ios.release',\n    },\n    'android.emu.debug': {\n      device: 'emulator',\n      app: 'android.debug',\n    },\n    'android.emu.release': {\n      device: 'emulator',\n      app: 'android.release',\n    },\n  },\n"})}),"\n",(0,i.jsx)(t.admonition,{title:"Build in Release Mode",type:"caution",children:(0,i.jsxs)(t.p,{children:["The React Native project must be build with Detox in release mode, as debug builds trigger ",(0,i.jsx)(t.a,{href:"https://reactnative.dev/docs/metro",children:"Metro"})," to start, which can interfere with testing. For more details, ",(0,i.jsx)(t.a,{href:"https://wix.github.io/Detox/docs/introduction/preparing-for-ci",children:(0,i.jsx)(t.strong,{children:"refer to the official Detox documentation"})}),"."]})}),"\n",(0,i.jsx)(t.admonition,{title:"Output Directory",type:"caution",children:(0,i.jsxs)(t.p,{children:["The ",(0,i.jsx)(t.strong,{children:"outputDirectory"})," must be set to ",(0,i.jsx)(t.strong,{children:"test-reports"})," at the root of the project, as the step will search for test results in that directory."]})}),"\n",(0,i.jsx)(t.admonition,{title:"Output Name",type:"caution",children:(0,i.jsxs)(t.p,{children:["The ",(0,i.jsx)(t.strong,{children:"outputName"})," must be set to ",(0,i.jsx)(t.code,{children:"\\*-report.xml"})," at the end of the file name, as the step will search for test results for these files."]})}),"\n",(0,i.jsx)(t.h2,{id:"performing-react-native-ui-tests-in-appcircle",children:"Performing React Native UI tests in Appcircle"}),"\n",(0,i.jsxs)(t.p,{children:["To run your tests during the build process, you can simply add the ",(0,i.jsx)(t.strong,{children:"React Native UI Test"})," step in your workflows."]}),"\n",(0,i.jsx)(t.p,{children:"Make sure the step is placed after the following:"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:(0,i.jsx)(t.a,{href:"/workflows/react-native-specific-workflow-steps/node-install",children:(0,i.jsx)(t.strong,{children:"Node Install"})})}),"\n",(0,i.jsx)(t.li,{children:(0,i.jsx)(t.a,{href:"/workflows/react-native-specific-workflow-steps/npm-yarn-commands",children:(0,i.jsx)(t.strong,{children:"Npm/Yarn Commands"})})}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsxs)(t.a,{href:"/workflows/ios-specific-workflow-steps/cocoapods-install",children:[(0,i.jsx)(t.strong,{children:"Cocoapods Install"})," "]})," (for only iOS)"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.a,{href:"/workflows/android-specific-workflow-steps/wait-for-android-emulator",children:(0,i.jsx)(t.strong,{children:"Wait for Android Emulator"})})," (for only Android)"]}),"\n"]}),"\n",(0,i.jsx)(t.p,{children:"and make sure the step is placed before the following:"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:(0,i.jsx)(t.a,{href:"/workflows/react-native-specific-workflow-steps/test-reports-react-native",children:(0,i.jsx)(t.strong,{children:"Test Reports for React Native"})})}),"\n",(0,i.jsx)(t.li,{children:(0,i.jsx)(t.a,{href:"/workflows/common-workflow-steps/export-build-artifacts",children:(0,i.jsx)(t.strong,{children:"Export Build Artifacts"})})}),"\n"]}),"\n",(0,i.jsxs)(t.p,{children:["For detailed information on Workflow structure, please visit the ",(0,i.jsx)(t.a,{href:"/workflows",children:(0,i.jsx)(t.strong,{children:"Workflows documentation"})}),"."]}),"\n",(0,i.jsxs)(t.p,{children:["For more information, please visit the ",(0,i.jsx)(t.strong,{children:"React Native UI Test"})," workflow step ",(0,i.jsx)(t.a,{href:"/workflows/react-native-specific-workflow-steps/react-native-ui-test#prerequisites",children:"documentation"}),"."]}),"\n",(0,i.jsx)(t.h2,{id:"generating-test-report",children:"Generating Test Report"}),"\n",(0,i.jsxs)(t.p,{children:["If you add ",(0,i.jsx)(t.a,{href:"https://github.com/appcircleio/appcircle-test-report-component",children:"Test Report Component"})," to your workflow, Appcircle will show the result of your tests and code coverage with a clean UI."]}),"\n",(0,i.jsx)(s,{url:"https://cdn.appcircle.io/docs/assets/test-reports.png"}),"\n",(0,i.jsxs)(t.p,{children:["You must add this step ",(0,i.jsx)(t.strong,{children:"after"})," the ",(0,i.jsx)(t.code,{children:"React Native UI Test"})," so that it can parse test results. Your workflow should look like the below."]}),"\n",(0,i.jsx)(s,{url:"https://cdn.appcircle.io/docs/assets/BE4404New-testReport.png"}),"\n",(0,i.jsx)(t.h2,{id:"showing-test-reports",children:"Showing Test Reports"}),"\n",(0,i.jsx)(t.p,{children:"Appcircle can show passing and failing tests in compact UI."}),"\n",(0,i.jsx)(s,{url:"https://cdn.appcircle.io/docs/assets/test-reports-detail.png"}),"\n",(0,i.jsx)(t.admonition,{title:"Test Suites",type:"caution",children:(0,i.jsx)(t.p,{children:"The name for Test Suites appears as undefined because the tests are not wrapped inside a describe block, which is required for the suite name to be properly displayed in the report."})}),"\n",(0,i.jsx)(s,{url:"https://cdn.appcircle.io/docs/assets/test-reports-suite-detail.png"})]})}function p(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},28453:(e,t,s)=>{s.d(t,{R:()=>o,x:()=>a});var n=s(96540);const i={},r=n.createContext(i);function o(e){const t=n.useContext(r);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),n.createElement(r.Provider,{value:t},e.children)}}}]);