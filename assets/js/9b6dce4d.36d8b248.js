"use strict";(self.webpackChunkappcircle_docusaurus=self.webpackChunkappcircle_docusaurus||[]).push([[96268],{1704:(e,s,t)=>{t.r(s),t.d(s,{assets:()=>c,contentTitle:()=>l,default:()=>p,frontMatter:()=>a,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"workflows/common-workflow-steps/sonarqube","title":"SonarQube","description":"This step allows you to analyse your code quality with the SonarQube CLI.","source":"@site/docs/workflows/common-workflow-steps/sonarqube.md","sourceDirName":"workflows/common-workflow-steps","slug":"/workflows/common-workflow-steps/sonarqube","permalink":"/workflows/common-workflow-steps/sonarqube","draft":false,"unlisted":false,"editUrl":"https://github.com/appcircleio/appcircle-docusaurus/tree/master/docs/workflows/common-workflow-steps/sonarqube.md","tags":[{"inline":false,"label":"sonarqube","permalink":"/tags/sonarqube","description":"Description for sonarqube"},{"inline":false,"label":"code","permalink":"/tags/code","description":"Description for code"},{"inline":false,"label":"quality","permalink":"/tags/quality","description":"Description for quality"},{"inline":false,"label":"analysis","permalink":"/tags/analysis","description":"Description for analysis"},{"inline":false,"label":"workflow","permalink":"/tags/workflow","description":"Description for workflow"},{"inline":false,"label":"step","permalink":"/tags/step","description":"Description for step"}],"version":"current","frontMatter":{"title":"SonarQube","description":"This step allows you to analyse your code quality with the SonarQube CLI.","tags":["sonarqube","code","quality","analysis","workflow","step"]},"sidebar":"mySidebar","previous":{"title":"Snyk Scan Security","permalink":"/workflows/common-workflow-steps/snyk-scan-security"},"next":{"title":"Testinium","permalink":"/workflows/common-workflow-steps/testinium"}}');var n=t(74848),o=t(28453),i=t(69678);const a={title:"SonarQube",description:"This step allows you to analyse your code quality with the SonarQube CLI.",tags:["sonarqube","code","quality","analysis","workflow","step"]},l="SonarQube",c={},d=[{value:"Prerequisites",id:"prerequisites",level:3},{value:"Input Variables",id:"input-variables",level:3},{value:"Including Tests",id:"including-tests",level:3},{value:"iOS Tests",id:"ios-tests",level:4},{value:"Android Tests",id:"android-tests",level:4}];function h(e){const s={a:"a",admonition:"admonition",code:"code",h1:"h1",h3:"h3",h4:"h4",header:"header",hr:"hr",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,o.R)(),...e.components},{ExternalUrlRef:t}=s;return t||function(e,s){throw new Error("Expected "+(s?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("ExternalUrlRef",!0),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.header,{children:(0,n.jsx)(s.h1,{id:"sonarqube",children:"SonarQube"})}),"\n",(0,n.jsxs)(s.p,{children:["This step allows you to analyse your code quality with the ",(0,n.jsx)(s.a,{href:"https://docs.sonarsource.com/sonarqube/latest/analyzing-source-code/scanners/sonarscanner",children:"SonarQube CLI"}),". Whichever workflow you are doing your code analysis after, please run the ",(0,n.jsx)(s.strong,{children:"SonarQube"})," step after that step is completed."]}),"\n",(0,n.jsx)(i.A,{url:"https://cdn.appcircle.io/docs/assets/BE2583-sonarOrder.png"}),"\n",(0,n.jsx)(s.h3,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,n.jsxs)(s.p,{children:["Before running the ",(0,n.jsx)(s.strong,{children:"SonarQube"})," step, you must complete certain prerequisites, as detailed in the table below:"]}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"Prerequisite Workflow Step"}),(0,n.jsx)(s.th,{children:"Description"})]})}),(0,n.jsx)(s.tbody,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.a,{href:"/workflows/common-workflow-steps/git-clone",children:(0,n.jsx)(s.strong,{children:"Git Clone"})})}),(0,n.jsxs)(s.td,{children:["If you intend to retrieve the ",(0,n.jsx)(s.strong,{children:"SonarQube Scanner"})," parameters from the ",(0,n.jsx)(s.code,{children:"sonar-project.properties"})," file in your repository, it's essential to employ the ",(0,n.jsx)(s.strong,{children:"Git Clone"})," step before the ",(0,n.jsx)(s.strong,{children:"SonarQube"})," step. After the ",(0,n.jsx)(s.strong,{children:"Git Clone"})," step is completed, it generates the ",(0,n.jsx)(s.code,{children:"$AC_REPOSITORY_DIR"})," variable, which is used as input for the ",(0,n.jsx)(s.strong,{children:"SonarQube"})," step."]})]})})]}),"\n",(0,n.jsx)(s.h3,{id:"input-variables",children:"Input Variables"}),"\n",(0,n.jsx)(s.p,{children:"This step contains some input variable(s). It needs these variable(s) to work. The table below gives explanation for this variable(s)."}),"\n",(0,n.jsx)(i.A,{url:"https://cdn.appcircle.io/docs/assets/BE2583-sonarInput.png"}),"\n",(0,n.jsx)(s.admonition,{type:"caution",children:(0,n.jsxs)(s.p,{children:["Please note that ",(0,n.jsx)(s.strong,{children:"SonarQube"})," is a commercial code quality analysis tool. The parameters required for the scanner to work should be used as ",(0,n.jsx)(s.a,{href:"/environment-variables",children:(0,n.jsx)(s.strong,{children:"Enviroment Variables"})})," as they may create security vulnerabilities. You can obtain these parameters by contacting your DevOps team."]})}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"Variable Name"}),(0,n.jsx)(s.th,{children:"Description"}),(0,n.jsx)(s.th,{children:"Status     \xa0\xa0\xa0\xa0"})]})}),(0,n.jsxs)(s.tbody,{children:[(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"$AC_SONAR_VERSION"})}),(0,n.jsxs)(s.td,{children:["You can change the ",(0,n.jsx)(s.strong,{children:"SonarQube CLI"})," version as you wish with the version parameter. The default will be the ",(0,n.jsx)(s.strong,{children:"latest"}),". For more information about the ",(0,n.jsx)(s.strong,{children:"SonarQube CLI"})," version, please check out this ",(0,n.jsx)(s.a,{href:"https://github.com/SonarSource/sonar-scanner-cli/releases",children:"Github releases page"}),"."]}),(0,n.jsx)(s.td,{children:"Required"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"$AC_SONAR_PARAMETERS"})}),(0,n.jsxs)(s.td,{children:[(0,n.jsx)(s.a,{href:"https://docs.sonarsource.com/sonarqube/9.9/analyzing-source-code/analysis-parameters/",children:"Scanner parameters"})," are written in Java property format. You have extra parameters to be able to run ",(0,n.jsx)(s.a,{href:"https://docs.sonarsource.com/sonarqube/9.9/analyzing-source-code/scanners/sonarscanner/",children:(0,n.jsx)(s.strong,{children:"Sonar Scanner"})}),"; you can specify them directly here. If there is a ",(0,n.jsx)(s.code,{children:"sonar-project.properties"})," file in the main directory of your repository, its contents will be used instead of the properties entered here. If this input variable is not defined and the mentioned file does not exist in your repository, then the ",(0,n.jsx)(s.strong,{children:"SonarQube"})," step will not work."]}),(0,n.jsx)(s.td,{children:"Optional"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"$AC_SONAR_EXTRA_PARAMETERS"})}),(0,n.jsxs)(s.td,{children:["Extra command line parameters. Enter ",(0,n.jsx)(s.code,{children:"-X"})," for debug mode."]}),(0,n.jsx)(s.td,{children:"Optional"})]})]})]}),"\n",(0,n.jsx)(s.h3,{id:"including-tests",children:"Including Tests"}),"\n",(0,n.jsxs)(s.p,{children:["You can also include your unit/UI test results in the ",(0,n.jsx)(s.strong,{children:"SonarQube"})," analysis."]}),"\n",(0,n.jsx)(s.admonition,{type:"caution",children:(0,n.jsxs)(s.p,{children:["If you want to include your test results in the ",(0,n.jsx)(s.strong,{children:"SonarQube"})," analysis, always run the ",(0,n.jsx)(s.strong,{children:"SonarQube"})," step after the test step."]})}),"\n",(0,n.jsx)(s.h4,{id:"ios-tests",children:"iOS Tests"}),"\n",(0,n.jsx)(i.A,{url:"https://cdn.appcircle.io/docs/assets/BE2583-sonarTestOrder.png"}),"\n",(0,n.jsx)(s.admonition,{type:"danger",children:(0,n.jsxs)(s.p,{children:["SonarQube accepts ",(0,n.jsx)(s.code,{children:"XML"})," format files to analyse test results. In order to analyse your test results, do not forget to convert the test results to ",(0,n.jsx)(s.code,{children:"XML"})," format by running the ",(0,n.jsx)(s.a,{href:"/workflows/ios-specific-workflow-steps/convert-xcresult-to-xml-html",children:(0,n.jsx)(s.strong,{children:"Convert Xcresult to HTML/XML"})})," step after the ",(0,n.jsx)(s.a,{href:"/workflows/ios-specific-workflow-steps/xcodebuild-for-unit-and-ui-test",children:(0,n.jsx)(s.strong,{children:"Xcodebuild for Unit and UI testing"})})," step."]})}),"\n",(0,n.jsx)(s.h4,{id:"android-tests",children:"Android Tests"}),"\n",(0,n.jsxs)(s.p,{children:["If you intend to send the test result file obtained from the Android unit test output to ",(0,n.jsx)(s.strong,{children:"SonarQube"}),", it is necessary to execute the ",(0,n.jsx)(s.strong,{children:"Android Unit Tests"})," step before the ",(0,n.jsx)(s.strong,{children:"SonarQube"})," step."]}),"\n",(0,n.jsx)(i.A,{url:"https://cdn.appcircle.io/docs/assets/BE2583-sonarTestAndroidOrder.png"}),"\n",(0,n.jsx)(s.admonition,{type:"caution",children:(0,n.jsxs)(s.p,{children:["Ensure that the test result path provided to ",(0,n.jsx)(s.strong,{children:"SonarQube"})," as a property matches the test result path generated by the ",(0,n.jsx)(s.a,{href:"/workflows/android-specific-workflow-steps/android-unit-tests",children:(0,n.jsx)(s.strong,{children:"Android Unit Tests"})})," step, and direct the output to that location."]})}),"\n",(0,n.jsx)(s.hr,{}),"\n",(0,n.jsx)(s.p,{children:"To access the source code of this component, please use the following link:"}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.a,{href:"https://github.com/appcircleio/appcircle-sonarqube-component",children:(0,n.jsx)(t,{url:"https://github.com/appcircleio/appcircle-sonarqube-component",title:"GitHub - appcircleio/appcircle-sonarqube-component: Appcircle SonarQube Component",description:"Appcircle SonarQube Component. Contribute to appcircleio/appcircle-sonarqube-component development by creating an account on GitHub.",image:"https://opengraph.githubassets.com/794e83f2e6b50d1a2e75ad4c12ae46610a246cde539bfe0212cb02f37f168544/appcircleio/appcircle-sonarqube-component"})})})]})}function p(e={}){const{wrapper:s}={...(0,o.R)(),...e.components};return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(h,{...e})}):h(e)}},69678:(e,s,t)=>{t.d(s,{A:()=>n});t(96540);var r=t(74848);function n(e){let{url:s,alt:t}=e;return(0,r.jsx)("img",{className:"screenshot",src:s,alt:t||"Screenshot"})}},28453:(e,s,t)=>{t.d(s,{R:()=>i,x:()=>a});var r=t(96540);const n={},o=r.createContext(n);function i(e){const s=r.useContext(o);return r.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:i(e.components),r.createElement(o.Provider,{value:s},e.children)}}}]);