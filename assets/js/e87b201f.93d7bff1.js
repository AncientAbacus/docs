"use strict";(self.webpackChunkappcircle_docusaurus=self.webpackChunkappcircle_docusaurus||[]).push([[95652],{93978:(e,n,r)=>{r.d(n,{Ay:()=>c,RM:()=>i});var o=r(74848),t=r(28453);const i=[{value:"Need help?",id:"need-help",level:3}];function s(e){const n={a:"a",h3:"h3",...(0,t.R)(),...e.components},{ExternalUrlRef:r}=n;return r||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("ExternalUrlRef",!0),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.h3,{id:"need-help",children:"Need help?"}),"\n",(0,o.jsx)("p",{class:"need-help",children:"Get help from Appcircle's support team, or see how others are using Appcircle by joining our Slack Channel."}),"\n",(0,o.jsx)("p",{class:"need-help",children:(0,o.jsx)(n.a,{href:"https://join.slack.com/t/appcircleio/signup",children:(0,o.jsx)(r,{url:"https://join.slack.com/t/appcircleio/signup",title:"Slack",description:"No description available",image:"https://cdn.appcircle.io/docs/assets/appcircle-logo.png"})})})]})}function c(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(s,{...e})}):s(e)}},26074:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>u,frontMatter:()=>c,metadata:()=>o,toc:()=>d});const o=JSON.parse('{"id":"self-hosted-appcircle/install-server/helm-chart/configuration/production-readiness","title":"Production Readiness","description":"Learn how to configure the Appcircle server Helm chart for production environments","source":"@site/docs/self-hosted-appcircle/install-server/helm-chart/configuration/production-readiness.md","sourceDirName":"self-hosted-appcircle/install-server/helm-chart/configuration","slug":"/self-hosted-appcircle/install-server/helm-chart/configuration/production-readiness","permalink":"/self-hosted-appcircle/install-server/helm-chart/configuration/production-readiness","draft":false,"unlisted":false,"editUrl":"https://github.com/appcircleio/appcircle-docusaurus/tree/master/docs/self-hosted-appcircle/install-server/helm-chart/configuration/production-readiness.md","tags":[{"inline":false,"label":"self-hosted","permalink":"/tags/self-hosted","description":"Description for self-hosted"},{"inline":false,"label":"helm","permalink":"/tags/helm","description":"Helm related documentations"},{"inline":false,"label":"configuration","permalink":"/tags/configuration","description":"Description for configuration"},{"inline":false,"label":"kubernetes","permalink":"/tags/kubernetes","description":"Kubernetes related documentations"}],"version":"current","sidebarPosition":20,"frontMatter":{"title":"Production Readiness","description":"Learn how to configure the Appcircle server Helm chart for production environments","tags":["self-hosted","helm","configuration","kubernetes"],"sidebar_position":20},"sidebar":"mySidebar","previous":{"title":"Upgrades","permalink":"/self-hosted-appcircle/install-server/helm-chart/upgrades"},"next":{"title":"Storage Configuration","permalink":"/self-hosted-appcircle/install-server/helm-chart/configuration/storage-configuration"}}');var t=r(74848),i=r(28453),s=r(93978);const c={title:"Production Readiness",description:"Learn how to configure the Appcircle server Helm chart for production environments",tags:["self-hosted","helm","configuration","kubernetes"],sidebar_position:20},a=void 0,l={},d=[{value:"PostgreSQL",id:"postgresql",level:3},{value:"MongoDB",id:"mongodb",level:3},{value:"MinIO",id:"minio",level:3},{value:"HashiCorp Vault",id:"hashicorp-vault",level:3},...s.RM];function p(e){const n={a:"a",admonition:"admonition",code:"code",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components},{Details:r}=n;return r||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.p,{children:"By default, the Appcircle Helm chart will deploy all the required services to the Kubernetes cluster for testing purposes. It is recommended that stateful applications, such as databases or object storage, be deployed outside the scope of the Helm chart. This allows you to have better control over their configuration and management."}),"\n",(0,t.jsx)(n.p,{children:"If you wish to deploy these services within the Helm chart scope, you can use the default configuration provided by the Appcircle Helm chart."}),"\n",(0,t.jsx)(n.admonition,{type:"caution",children:(0,t.jsxs)(n.p,{children:["The configurations for production readiness should be ",(0,t.jsx)(n.strong,{children:"done before the first deployment"})," and ",(0,t.jsx)(n.strong,{children:"cannot be changed later"}),". To modify these settings, you should ",(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.a,{href:"/self-hosted-appcircle/install-server/helm-chart/uninstallation",children:"uninstall Appcircle"})})," and redeploy it."]})}),"\n",(0,t.jsxs)(n.admonition,{type:"info",children:[(0,t.jsx)(n.p,{children:"The commands below assume you have already created a namespace for Appcircle. If you haven\u2019t yet, you can create and switch to the Appcircle namespace using the following commands:"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Create the namespace\nkubectl create namespace appcircle\n"})}),(0,t.jsxs)(n.p,{children:["Make sure to replace ",(0,t.jsx)(n.code,{children:"appcircle"})," with your preferred namespace name if necessary."]})]}),"\n",(0,t.jsx)(n.h3,{id:"postgresql",children:"PostgreSQL"}),"\n",(0,t.jsxs)(n.p,{children:["The Appcircle chart, by default, includes an in-cluster PostgreSQL deployment provided by ",(0,t.jsx)(n.code,{children:"bitnami/PostgreSQL"}),"."]}),"\n",(0,t.jsx)(n.p,{children:"If you are deploying the Appcircle server for testing purposes, you may use the built-in PostgreSQL deployment."}),"\n",(0,t.jsxs)(n.p,{children:["For a production-ready setup, it is recommended to configure an external PostgreSQL instance. The recommended version is PostgreSQL ",(0,t.jsx)(n.code,{children:"12.x"}),", with a disk size of 40GB."]}),"\n",(0,t.jsx)(n.p,{children:"To use an external PostgreSQL database, you can follow the steps below:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Create a secret for the PostgreSQL password. While you can choose your own secret name and key, it is recommended to use the format ",(0,t.jsx)(n.code,{children:"${releaseName}-postgresql-connection"})," with the key ",(0,t.jsx)(n.code,{children:"password"}),"."]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"kubectl create secret generic appcircle-server-postgresql-connection \\\n  -n appcircle \\\n  --from-literal=password=superSecretPostgresqlPassword\n"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Update the ",(0,t.jsx)(n.code,{children:"values.yaml"})," accordingly."]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:'auth:\n  auth-keycloak:\n    database:\n      hostname: "192.168.1.244"\n      port: "5432"\n      username: "ackeycloak"\n      database: "ackeycloak"\n      existingSecret: "appcircle-server-postgresql-connection"\n      existingSecretKey: "password"\n  auth-postgresql:\n    enabled: false\n'})}),"\n",(0,t.jsx)(n.h3,{id:"mongodb",children:"MongoDB"}),"\n",(0,t.jsxs)(n.p,{children:["By default, the Appcircle chart includes an in-cluster MongoDB deployment provided by ",(0,t.jsx)(n.code,{children:"bitnami/mongodb"})," by default."]}),"\n",(0,t.jsx)(n.p,{children:"If you are deploying the Appcircle server for testing purposes, the built-in MongoDB deployment can be used."}),"\n",(0,t.jsxs)(n.p,{children:["For production environments, it is recommended to set up an external, production-grade MongoDB instance. The recommended version is MongoDB ",(0,t.jsx)(n.code,{children:"4.x"}),", with a disk size of 40GB."]}),"\n",(0,t.jsx)(n.p,{children:"To use an external MongoDB database, you can follow the steps below:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Create individual users and passwords for each Appcircle service on the MongoDB instance. Each service should have its own user with distinct credentials to ensure proper access control and security. Below is an example of how to generate a secret with MongoDB connection strings for each service, where each user is assigned specific permissions for its corresponding service."}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Create a secret for the MongoDB connections. While you can choose your own secret name and key, it is recommended to use the format ",(0,t.jsx)(n.code,{children:"${releaseName}-mongo-connections"})," with the multiple keys for each service."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"kubectl create secret generic appcircle-server-mongo-connections \\\n  -n appcircle \\\n  --from-literal=agentcache='mongodb://agentcachemongo:agentPassword@192.168.1.244:27017?retryWrites=true' \\\n  --from-literal=build='mongodb://buildmongo:buildPassword@192.168.1.244:27017?retryWrites=true' \\\n  --from-literal=distribution='mongodb://distributionmongo:distPassword@192.168.1.244:27017?retryWrites=true' \\\n  --from-literal=license='mongodb://licensemongo:licensePassword@192.168.1.244:27017?retryWrites=true' \\\n  --from-literal=notification='mongodb://notificationmongo:notificationPassword@192.168.1.244:27017?retryWrites=true' \\\n  --from-literal=publish='mongodb://publishmongo:publishPassword@192.168.1.244:27017?retryWrites=true' \\\n  --from-literal=reporting='mongodb://reportmongo:reportPassword@192.168.1.244:27017?retryWrites=true' \\\n  --from-literal=resign='mongodb://resignmongo:resignPassword@192.168.1.244:27017?retryWrites=true' \\\n  --from-literal=resource='mongodb://resourcemongo:resourcePassword@192.168.1.244:27017?retryWrites=true' \\\n  --from-literal=schedulemanager='mongodb://schedulemanagermongo:schedulerPassword@192.168.1.244:27017?retryWrites=true' \\\n  --from-literal=signingidentity='mongodb://signingmongo:signingPassword@192.168.1.244:27017?retryWrites=true' \\\n  --from-literal=store='mongodb://storemongo:storePassword@192.168.1.244:27017?retryWrites=true' \\\n  --from-literal=storesubmit='mongodb://storesubmitmongo:storeSubmitPassword@192.168.1.244:27017?retryWrites=true' \\\n  --from-literal=webhook='mongodb://webhookmongo:webhookPassword@192.168.1.244:27017?retryWrites=true'\n"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Update the ",(0,t.jsx)(n.code,{children:"values.yaml"})," accordingly."]}),"\n"]}),"\n",(0,t.jsxs)(r,{children:[(0,t.jsxs)("summary",{children:["Click to view example ",(0,t.jsx)(n.code,{children:"values.yaml"})," file."]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:'agentcache:\n  mongodb:\n    external:\n      enabled: true\n      existingConnectionSecret: "appcircle-server-mongo-connections"\n      existingConnectionSecretKey: "agentcache"\n    database: agentCacheStore\nbuild:\n  mongodb:\n    external:\n      enabled: true\n      existingConnectionSecret: "appcircle-server-mongo-connections"\n      existingConnectionSecretKey: "build"\n    database: buildStore\ndistribution:\n  distribution-server:\n    mongodb:\n      external:\n        enabled: true\n        existingConnectionSecret: "appcircle-server-mongo-connections"\n        existingConnectionSecretKey: "distribution"\n      database: distributionStore\n  distribution-testeradmin:\n    mongodb:\n      external:\n        enabled: true\n        existingConnectionSecret: "appcircle-server-mongo-connections"\n        existingConnectionSecretKey: "distribution"\n      database: distributionStore\n  distribution-testerapi:\n    mongodb:\n      external:\n        enabled: true\n        existingConnectionSecret: "appcircle-server-mongo-connections"\n        existingConnectionSecretKey: "distribution"\n      database: distributionStore\n  distribution-testerweb:\n    mongodb:\n      external:\n        enabled: true\n        existingConnectionSecret: "appcircle-server-mongo-connections"\n        existingConnectionSecretKey: "distribution"\n        database: distributionStore\n  distribution-web:\n    mongodb:\n      external:\n        enabled: true\n        existingConnectionSecret: "appcircle-server-mongo-connections"\n        existingConnectionSecretKey: "distribution"\n      database: distributionStore\nlicense:\n  mongodb:\n    external:\n      enabled: true\n      existingConnectionSecret: "appcircle-server-mongo-connections"\n      existingConnectionSecretKey: "license"\n    database: licenseStore\nnotification:\n  mongodb:\n    external:\n      enabled: true\n      existingConnectionSecret: "appcircle-server-mongo-connections"\n      existingConnectionSecretKey: "notification"\n    database: notificationStore\npublish:\n  mongodb:\n    external:\n      enabled: true\n      existingConnectionSecret: "appcircle-server-mongo-connections"\n      existingConnectionSecretKey: "publish"\n    database: publishStore\nreporting:\n  mongodb:\n    external:\n      enabled: true\n      existingConnectionSecret: "appcircle-server-mongo-connections"\n      existingConnectionSecretKey: "reporting"\n    database: reportingStore\nresign:\n  mongodb:\n    external:\n      enabled: true\n      existingConnectionSecret: "appcircle-server-mongo-connections"\n      existingConnectionSecretKey: "resign"\n    database: resignStore\nresource:\n  mongodb:\n    external:\n      enabled: true\n      existingConnectionSecret: "appcircle-server-mongo-connections"\n      existingConnectionSecretKey: "resource"\n    database: resourceStore\nschedulemanager:\n  mongodb:\n    external:\n      enabled: true\n      existingConnectionSecret: "appcircle-server-mongo-connections"\n      existingConnectionSecretKey: "schedulemanager"\n    database: scheduleManagerStore\nsigningidentity:\n  mongodb:\n    external:\n      enabled: true\n      existingConnectionSecret: "appcircle-server-mongo-connections"\n      existingConnectionSecretKey: "signingidentity"\n    database: signingIdentityStore\nstore:\n  store-web:\n    mongodb:\n      external:\n        enabled: true\n        existingConnectionSecret: "appcircle-server-mongo-connections"\n        existingConnectionSecretKey: "store"\n      database: enterpriseStore\n  store-admin:\n    mongodb:\n      external:\n        enabled: true\n        existingConnectionSecret: "appcircle-server-mongo-connections"\n        existingConnectionSecretKey: "store"\n      database: enterpriseStore\n  store-api:\n    mongodb:\n      external:\n        enabled: true\n        existingConnectionSecret: "appcircle-server-mongo-connections"\n        existingConnectionSecretKey: "store"\n      database: enterpriseStore\n  store-profile:\n    mongodb:\n      external:\n        enabled: true\n        existingConnectionSecret: "appcircle-server-mongo-connections"\n        existingConnectionSecretKey: "store"\n      database: enterpriseStore\n  store-report:\n    mongodb:\n      external:\n        enabled: true\n        existingConnectionSecret: "appcircle-server-mongo-connections"\n        existingConnectionSecretKey: "store"\n      database: enterpriseStore\nstoresubmit:\n  mongodb:\n    external:\n      enabled: true\n      existingConnectionSecret: "appcircle-server-mongo-connections"\n      existingConnectionSecretKey: "storesubmit"\n    database: storeSubmitStore\nwebhook:\n  mongodb:\n    external:\n      enabled: true\n      existingConnectionSecret: "appcircle-server-mongo-connections"\n      existingConnectionSecretKey: "webhook"\n    database: webhookStore\n\nmongodb:\n  enabled: false\n'})})]}),"\n",(0,t.jsx)(n.h3,{id:"minio",children:"MinIO"}),"\n",(0,t.jsxs)(n.p,{children:["By default, the Appcircle chart includes an in-cluster MinIO deployment provided by ",(0,t.jsx)(n.code,{children:"bitnami/minio"}),"."]}),"\n",(0,t.jsx)(n.p,{children:"If you are installing the Appcircle for testing purposes, you may use the built-in MinIO deployment."}),"\n",(0,t.jsxs)(n.p,{children:["For production environments, it is recommended to configure an external MinIO instance. The recommended version is MinIO ",(0,t.jsx)(n.code,{children:"2024-03-15"})," or later, with a disk size of 1TB."]}),"\n",(0,t.jsx)(n.admonition,{type:"info",children:(0,t.jsx)(n.p,{children:"The recommended disk size for the MinIO instance may vary depending on your usage requirements. It can range from 500GB to 3-4TB."})}),"\n",(0,t.jsx)(n.p,{children:"To use an external MinIO instance, you can follow the steps below:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Create the following buckets for Appcircle to use on the MinIO instance:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"appcircle-local-resource-temp"}),"\n",(0,t.jsx)(n.li,{children:"appcircle-local-resource-build"}),"\n",(0,t.jsx)(n.li,{children:"appcircle-local-resource-distribution"}),"\n",(0,t.jsx)(n.li,{children:"appcircle-local-resource-storesubmit"}),"\n",(0,t.jsx)(n.li,{children:"appcircle-local-resource-store"}),"\n",(0,t.jsx)(n.li,{children:"appcircle-local-resource-agent-cache"}),"\n",(0,t.jsx)(n.li,{children:"appcircle-local-resource-backup"}),"\n",(0,t.jsx)(n.li,{children:"appcircle-local-resource-publish"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Create a secret with the name ",(0,t.jsx)(n.code,{children:"${releaseName}-minio-connection"})," containing the ",(0,t.jsx)(n.code,{children:"accessKey"})," and ",(0,t.jsx)(n.code,{children:"secretKey"})," keys."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"kubectl create secret generic appcircle-server-minio-connection \\\n  -n appcircle \\\n  --from-literal=accessKey='admin' \\\n  --from-literal=secretKey='superSecretAdminAccessKey'\n"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Update the ",(0,t.jsx)(n.code,{children:"values.yaml"})," accordingly."]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:'global:\n  minio:\n    url: "http://10.33.167.78:9000"\nminio:\n  enabled: false\n'})}),"\n",(0,t.jsx)(n.h3,{id:"hashicorp-vault",children:"HashiCorp Vault"}),"\n",(0,t.jsxs)(n.p,{children:["By default, the Appcircle chart includes an in-cluster HashiCorp Vault deployment provided by ",(0,t.jsx)(n.code,{children:"hashicorp/vault"}),"."]}),"\n",(0,t.jsx)(n.p,{children:"If you are deploying the appcircle for testing purposes, the built-in Vault deployment can be used."}),"\n",(0,t.jsxs)(n.p,{children:["For production environments, it is recommended to configure an external Hashicorp Vault instance. The recommended version is Vault ",(0,t.jsx)(n.code,{children:"v1.10.3"}),", with a disk size of 20GB."]}),"\n",(0,t.jsx)(n.p,{children:"To use an external Vault instance, you can follow the steps below:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Create a secret with the name ",(0,t.jsx)(n.code,{children:"${releaseName}-vault-seal"})," containing the ",(0,t.jsx)(n.code,{children:"token"})," key."]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"kubectl create secret generic appcircle-server-vault-seal \\\n  -n appcircle \\\n  --from-literal=token=hvs.superSecretVaultKey\n"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Update the ",(0,t.jsx)(n.code,{children:"values.yaml"})," accordingly."]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:'global:\n  vault:\n    url: "http://10.33.167.78:8082/v1/local/"\nvault:\n  enabled: false\n'})}),"\n",(0,t.jsx)(s.Ay,{})]})}function u(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(p,{...e})}):p(e)}},28453:(e,n,r)=>{r.d(n,{R:()=>s,x:()=>c});var o=r(96540);const t={},i=o.createContext(t);function s(e){const n=o.useContext(i);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:s(e.components),o.createElement(i.Provider,{value:n},e.children)}}}]);